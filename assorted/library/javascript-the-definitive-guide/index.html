<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Marcelo Fernandes" />
  <meta name="dcterms.date" content="2022-05-31" />
  <title>JavaScript - The Definitive Guide</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
<style rel="stylesheet">
  html {
    font-size: 16px;
  }
  body {
    hyphens: auto;
    text-align: justify;
    line-height: 1.7;
  }
  a {
    color: #1976d2;
    text-decoration: none;
    border-bottom: 1px solid;
  }
  a:visited {
    color: #1976d2;
  }
  pre.sourceCode {
    border-left: 3px solid #000;
    padding-left: 1.5rem;
    margin: 1em 0;
  }
  figcaption {
    display: none;
  }
</style>
<link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">JavaScript - The Definitive Guide</h1>
<p class="author">Marcelo Fernandes</p>
<p class="date">May 31, 2022</p>
</header>
<h1 id="review">Review</h1>
<p>The author’s intent:</p>
<blockquote>
<p>My goal with this book is to document the JavaScript language
comprehensively and definitively and to provide an in-depth introduction
to the most important client-side and server-side APIs available to
JavaScript programs.</p>
</blockquote>
<p>Given that this book is a proper systematic text book, to maximise my
content retention I’ll conduct this review on a chapter-to-chapter
approach.</p>
<p>Without further do:</p>
<h2 id="contents">Contents</h2>
<ul>
<li><a href="#chapter-1">Chapter 1. Introduction to JavaScript</a></li>
<li><a href="#chapter-2">Chapter 2. Lexial Structure</a></li>
<li><a href="#chapter-3">Chapter 3. Types, Values, and
Variables</a></li>
<li><a href="#chapter-4">Chapter 4. Expressions and Operators</a></li>
<li><a href="#chapter-5">Chapter 5. Statements</a></li>
<li><a href="#chapter-6">Chapter 6. Objects</a></li>
<li><a href="#chapter-7">Chapter 7. Arrays</a></li>
<li><a href="#chapter-8">Chapter 8. Functions</a></li>
<li><a href="#chapter-9">Chapter 9. Classes</a></li>
<li><a href="#chapter-10">Chapter 10. Modules</a></li>
<li><a href="#chapter-11">Chapter 11. Standard Library</a></li>
<li><a href="#chapter-12">Chapter 12. Iterators and Generators</a></li>
<li><a href="#chapter-13">Chapter 13. Asynchronous JavaScript</a></li>
</ul>
<h2 id="chapter-1">Chapter 1</h2>
<h3 id="introduction-to-javascript">Introduction to JavaScript</h3>
<p>The chapter starts with some definitions and history behind
JavaScript. Here are the comments that I deemed most relevant to start
with:</p>
<blockquote>
<p>JavaScript is a high-level, dynamic, interpreted programming language
that is well-suited to object-oriented and functional programming
styles.</p>
</blockquote>
<p>Regarding ECMAScript vs JavaScript:</p>
<blockquote>
<p>Because of trademark issues, the standardized version of the language
was stuck with the name ECMAScript (ECMA: European Computer
Manufacturer’s Association) or ES for short.</p>
</blockquote>
<blockquote>
<p>Since ES6, the ECMAScript specification has moved to a yearly
release. I.e: ES2016, ES2017, etc.</p>
</blockquote>
<p>Regarding incompatibility with earlier versions:</p>
<blockquote>
<p>From ES5 and later, programs can opt in to JavaScript’s strict mode
in which a number of language mistakes have been corrected. The
mechanism for opting in is the “use strict” directive.</p>
</blockquote>
<blockquote>
<p>In ES6 and later, the use of new language features often implicitly
invokes strict mode. For example, if you use the ES6 <code>class</code>
keyword or create an ES6 module, then all the code within the class or
module is automatically strict.</p>
</blockquote>
<p>Conditionally accessing properties with <code>?.</code></p>
<p>Where in Python you would have something like:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>book <span class="op">=</span> {<span class="st">&quot;topic&quot;</span>: <span class="st">&quot;Python&quot;</span>, <span class="st">&quot;edition&quot;</span>: <span class="dv">7</span>, <span class="st">&quot;contents&quot;</span>: {}}</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>chap1_sect1 <span class="op">=</span> book.get(<span class="st">&quot;contents&quot;</span>, {}).get(<span class="st">&quot;ch01&quot;</span>, {}).get(<span class="st">&quot;sect1&quot;</span>, <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<p>In JavaScript you would have something like:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>book <span class="op">=</span> {<span class="dt">topic</span><span class="op">:</span> <span class="st">&quot;JavaScript&quot;</span><span class="op">,</span> <span class="dt">edition</span><span class="op">:</span> <span class="dv">7</span><span class="op">,</span> <span class="dt">contents</span><span class="op">:</span> {}}</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> chap1_sect1 <span class="op">=</span> book<span class="op">.</span><span class="at">contents</span><span class="op">?.</span><span class="at">ch01</span><span class="op">?.</span><span class="at">sect1</span>  <span class="co">// undefined.</span></span></code></pre></div>
<p>Regarding the definition of an <strong>expression</strong>:</p>
<blockquote>
<p>An <em>expression</em> is a phrase of JavaScript that can be
<em>evaluated</em> to produce a value. For example, the use of
<code>.</code> and <code>[]</code> to refer to the value of an object
property or array element is an expression.</p>
</blockquote>
<p>A brief introduction of <strong>arrow functions</strong> (those
remind a lot lambda functions in Python)</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Firstly, a normal function:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">plus1</span>(x) {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Now the arrow function equivalent:</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>plus1 <span class="op">=</span> x <span class="kw">=&gt;</span> x <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span></code></pre></div>
<p>A brief example of looping through an array:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">sum</span>(array) {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(<span class="kw">let</span> x <span class="kw">of</span> array) {</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    sum <span class="op">+=</span> x<span class="op">;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>And a brief example of initialising a class:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="bu">Point</span> {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">constructor</span>(x<span class="op">,</span> y) {</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">=</span> x<span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">y</span> <span class="op">=</span> y<span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distance</span>() {</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">*</span> <span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">+</span> <span class="kw">this</span><span class="op">.</span><span class="at">y</span> <span class="op">*</span> <span class="kw">this</span><span class="op">.</span><span class="at">y</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> p <span class="op">=</span> <span class="kw">new</span> <span class="bu">Point</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span></code></pre></div>
<h2 id="chapter-2">Chapter 2</h2>
<h3 id="lexical-structure">Lexical Structure</h3>
<p>Definition</p>
<blockquote>
<p>The lexical structure of a programming language is the set of
elementary rules that specifies how you write programs in that language.
I.e., syntax.</p>
</blockquote>
<p>Comments:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">// This is a single-line comment</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">/* This is also a comment */</span> <span class="co">// and here is another one.</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"> * This is a multi-line comment. The extra * aren&#39;t part of the syntax, they</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"> * just look cool!</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span></code></pre></div>
<p>Identifiers in JavaScript must begin with a letter, an underscore, or
a dollar sign. Example:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>i</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>my_variable_name</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>v13</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>_dummy</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>$str</span></code></pre></div>
<p>Unicode escape sequences:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> café <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">// exactly four hexadecimal digits notation.</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>caf\u00e9</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">// one to six hexadecimal digits enclosed by curly braces.</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>caf\u{E9}</span></code></pre></div>
<p>Optional semicolons:</p>
<blockquote>
<p>In JavaScript, you can usually omit the semicolon between two
statements if those statements are written on separate lines. You can
also omit a semicolon at the end of a program or if the next token in
the program is a closing curly brace <code>}</code>. However, many JS
programmers use semicolons to explicitly mark the end of statements.</p>
</blockquote>
<div class="sourceCode" id="cb9"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">// in this case the semicolon could&#39;ve been ommited.</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">// in this other case, the semicolon is _required_</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> b <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">// not all line breaks are treated as semicolons. E.g:</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="op">=</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(a) <span class="co">// This is interpreted as let a; a = 3; console.log(a);</span></span></code></pre></div>
<p>A potential problem with the above:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> y <span class="op">=</span> x <span class="op">+</span> f</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>(a<span class="op">+</span>b)<span class="op">.</span><span class="fu">toString</span>()</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">// this is interpreted as</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> y <span class="op">=</span> x <span class="op">+</span> <span class="fu">f</span>(a<span class="op">+</span>b)<span class="op">.</span><span class="fu">toString</span>()</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">// JS interpreter things that it can continue as</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">// a function invocation!</span></span></code></pre></div>
<p>And therefore:</p>
<blockquote>
<p>In general, if a statement begins with <code>(</code>,
<code>[</code>, <code>/</code>, <code>+</code>, <code>-</code>, there is
a chance that it could be interpreted as a continuation of the statement
before. Statements beginning with /, + and - are quite rare in practice,
but statements beginning with ( and [ are not uncommon.</p>
</blockquote>
<p>Some programmers use defensive semicolons at the beginning of such
statements to avoid a bug if the statement before is modified and the
previously terminating semicolon removed.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> x <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="op">;</span>[x<span class="op">,</span> x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> x<span class="op">+</span><span class="dv">2</span>]<span class="op">.</span><span class="fu">forEach</span>(<span class="bu">console</span><span class="op">.</span><span class="fu">log</span>) <span class="co">// defensive ;</span></span></code></pre></div>
<p>Another exception: Never insert a line break between
<code>return</code>, <code>break</code>, or <code>continue</code> and
the expression that follows. Example:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">// if you write</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="kw">true</span><span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">// JavaScript interprets as</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span><span class="op">;</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">// although you probably meant</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">// other exceptions involve ++ and --, and arrow functions.</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">// in arrow functions the arrow itself must be in the same</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">// line as the parameter list.</span></span></code></pre></div>
<h2 id="chapter-3">Chapter 3</h2>
<h3 id="types-values-and-variables">Types, Values, And Variables</h3>
<blockquote>
<p>JavaScript types can be divided into two categories <em>primitive
types</em> and <em>object types</em>.</p>
</blockquote>
<blockquote>
<p>Primitive types include numbers, strings of text, and Boolean truth
values. The null and undefined are primitive values, but they are not
numbers, strings, or Booleans.</p>
</blockquote>
<blockquote>
<p>ES6 adds a new special-purpose type, known as Symbol. It enables the
definition of language extensions without harming backward
compatibility. (More on that later).</p>
</blockquote>
<p>In JavaScript, most objects are an unordered collection of named
values. JS also has a special object, known as array, to represent
ordered collections of numbered values. Arrays have some special
behaviour that distinguish them from ordinary objects. Refer to chapter
7. Other useful special objects the Map object (keys to value), and the
Set object.</p>
<blockquote>
<p>JavaScript differs from more static languages in that functions and
classes are not just part of the language syntax. They are themselves
values that can be manipulated by JavaScript programs.</p>
</blockquote>
<p>JavaScript has a garbage collector that is similar to Python’s one.
When a value isn’t reachable any more (i.e. when a program doesn’t have
a way to use it any more) the interpreter knows it and automatically
reclaims the memory.</p>
<p>Gotcha about methods:</p>
<blockquote>
<p>It’s not only JS objects that have methods, but numbers, strings,
booleans, and symbol values behave as if they have methods.
<strong>null</strong> and <strong>undefined</strong> are the only values
that methods cannot be invoked on.</p>
</blockquote>
<p>Gotcha about strings:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Strings are immutable</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> myString <span class="op">=</span> <span class="st">&quot;abcde&quot;</span><span class="op">;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>myString[<span class="dv">0</span>] <span class="op">=</span> <span class="st">&quot;z&quot;</span><span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>myString</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">// &gt; still prints &#39;abcde&#39;. However, fails silently.</span></span></code></pre></div>
<p>Gotcha about the equality operator:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">// JS liberally converts values from one type to another:</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">null</span> <span class="op">==</span> <span class="kw">undefined</span> <span class="co">// &gt; true: These two values are treated equal.</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;0&quot;</span> <span class="op">==</span> <span class="dv">0</span> <span class="co">// &gt; true: String converts to a number before comparing.</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span> <span class="op">==</span> <span class="kw">false</span> <span class="co">// &gt; true: Boolean converts to a number before comparing.</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;0&quot;</span> <span class="op">==</span> <span class="kw">false</span> <span class="co">// &gt; true: Both convert to 0 before comparing.</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* Note: In practice the `==` operator is</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co"> * deprecated in favor of the `===` operator,</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"> * which doesn&#39;t do type conversions.</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span></code></pre></div>
<p>On numbers:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">// On hexadecimals:</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="bn">0xff</span> <span class="op">+</span> <span class="bn">0xff</span> <span class="co">// &gt; (255 + 255) = 510</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">// &gt; ES6 you can express integers in binaries:</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="bn">0b10101</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">// and octals</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="bn">0o377</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">// You can use underscores to make they read nicer</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> billion <span class="op">=</span> <span class="dv">1_000_000_000</span><span class="op">;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> bytes <span class="op">=</span> <span class="bn">0x89_AB_CD_EF</span><span class="op">;</span></span></code></pre></div>
<p>Gotcha about numbers:</p>
<blockquote>
<p>Arithmetic in JavaScript does not raise errors in cases of overflow,
underflow, or division by zero. When the result of numeric operations
are larger than the largest representable number (overflow), the result
is the special infinity value, Infinity.</p>
</blockquote>
<blockquote>
<p>For underflows, i.e., when the result of an operation is closer to
zero than the smallest representable number, JavaScript returns 0 (or
-0!).</p>
</blockquote>
<blockquote>
<p>Division by zero isn’t an error in JavaScript, it simply returns
infinity. The only exception is zero divided by zero, in this case JS
returns a special not-a-number (NaN). Same with square root of negative
numbers and dividing infinity by infinity.</p>
</blockquote>
<p>Gotcha about NaN:</p>
<blockquote>
<p>In JavaScript NaN doesn’t compare equal to any other value, including
itself. This means that to determine if a value is a NaN, you got to do
<code>Number.isNaN(x)</code> as x === NaN won’t work!!! Another handy
function is <code>Number.isFinite()</code>, which returns true if its
argument is anything except Infinity, -Infinity, or NaN.</p>
</blockquote>
<p>On BigInt</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">// In ES2020 you can us BigInt.</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">// BigInts can have millions of digits</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">// They are declared with a `n` at the end of the number</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typeof</span>(<span class="dv">1234</span>n) <span class="co">// &gt; &#39;bigint&#39;</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">// They shouldn&#39;t be mixed with other numbers in arithmetic!</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1234</span>n <span class="op">+</span> <span class="dv">20</span> <span class="co">// &gt; Uncaught TypeError: cannot mix BigInt and other types.</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">// The exception being comparison!</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="op">&lt;</span> <span class="dv">2</span>n <span class="co">// &gt; true</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="op">===</span> <span class="dv">1</span>n <span class="co">// &gt; false, === checks for type equality too!</span></span></code></pre></div>
<p>On template literals (template strings).</p>
<p>Template strings are delimited with backticks (`). Allowing for
string interpolation, multi-line strings, and tagged templates.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">// untagged, these create strings:</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="vs">`string text`</span><span class="op">;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="vs">`string text first line;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="vs">string text second line`</span><span class="op">;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co">// similar to f-strings in Python</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="vs">`string text </span><span class="sc">${</span>expression<span class="sc">}</span><span class="vs"> string text`</span><span class="op">;</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Tagged. This calls the function</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co">// &quot;tagFunction&quot; with the template as</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="co">// the first argument, and substitution</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co">// values as subsequent arguments:</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">tagFunction</span>(strings<span class="op">,</span> <span class="op">...</span>values) {</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(strings)<span class="op">;</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(values)<span class="op">;</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> var1 <span class="op">=</span> <span class="st">&quot;Hello, &quot;</span><span class="op">;</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> var2 <span class="op">=</span> <span class="st">&quot;world.&quot;</span><span class="op">;</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="fu">tagFunction</span><span class="vs">`My text is: </span><span class="sc">${</span>var1<span class="sc">}${</span>var2<span class="sc">}</span><span class="vs"> Cool?`</span><span class="op">;</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="co">// &gt; [ &#39;My text is: &#39;, &#39;&#39;, &#39; Cool?&#39; ]</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="co">// &gt; [ &#39;Hello, &#39;, &#39;world.&#39; ]</span></span></code></pre></div>
<p>Handy string manipulation methods:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> s <span class="op">=</span> <span class="st">&quot;Hello, world&quot;</span><span class="op">;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Note that all of these methods</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">// don&#39;t actually change the string,</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">// as in JS strings are immutable.</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">// They, instead, return a whole new</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">// string.</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">split</span>(<span class="st">&quot;, &quot;</span>) <span class="co">// &gt; [ &quot;Hello&quot;, &quot;world&quot;]</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">slice</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">4</span>) <span class="co">// &gt; &quot;ell&quot;. Note: last number is not inclusive.</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">indexOf</span>(<span class="st">&quot;l&quot;</span>) <span class="co">// &gt; 2: first position of letter l</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">startsWith</span>(<span class="st">&quot;Hello&quot;</span>) <span class="co">// &gt; true</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">endsWith</span>(<span class="st">&quot;!&quot;</span>) <span class="co">// &gt; false</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">includes</span>(<span class="st">&quot;or&quot;</span>) <span class="co">//&gt; true* like &quot;or&quot; in s (Python)</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">replace</span>(<span class="st">&quot;llo&quot;</span><span class="op">,</span> <span class="st">&quot;ya&quot;</span>)  <span class="co">// &gt; &quot;Heya, world&quot;</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">toLowerCase</span>() <span class="co">// &gt; &quot;hello, world&quot;</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">toUpperCase</span>() <span class="co">// &gt; &quot;HELLO, WORLD&quot;</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="st">&quot; test &quot;</span><span class="op">.</span><span class="fu">trim</span>() <span class="co">// &gt; &quot;test&quot;</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="st">&quot; test &quot;</span><span class="op">.</span><span class="fu">trimStart</span>() <span class="co">// &gt; &quot;test &quot;</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="st">&quot; test &quot;</span><span class="op">.</span><span class="fu">trimEnd</span>() <span class="co">// &gt; &quot; test&quot;</span></span></code></pre></div>
<p>Falsy values that wouldn’t work on a conditional:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">// values that would fail a conditional</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">// if (o) ...</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="kw">undefined</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="kw">null</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span><span class="dv">0</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="kw">NaN</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;&quot;</span> <span class="co">// the empty string.</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co">// Note: All objects are truthy by definition.</span></span></code></pre></div>
<p>On <code>undefined</code> vs <code>null</code>:</p>
<blockquote>
<p>I consider <code>undefined</code> to represent a system-level,
unexpected, or error-like absence of value and <code>null</code> to
represent a program-level, normal, or expected absence of value.</p>
</blockquote>
<p>On Symbols:</p>
<blockquote>
<p>Property names are typically (and until ES6, exclusively) strings.
But in ES6 and later, <code>Symbols</code> can also serve this
purpose:</p>
</blockquote>
<div class="sourceCode" id="cb20"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> strname <span class="op">=</span> <span class="st">&quot; string name&quot;</span><span class="op">;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> symname <span class="op">=</span> <span class="bu">Symbol</span>(<span class="st">&quot;propname&quot;</span>)<span class="op">;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">typeof</span> strname <span class="co">// &gt; string</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typeof</span> symname <span class="co">// &gt; symbol</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> o <span class="op">=</span> {}<span class="op">;</span> <span class="co">// create an object</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>o[strname] <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>o[symname] <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>o[strname] <span class="co">// 1</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>o[symname] <span class="co">// 2</span></span></code></pre></div>
<blockquote>
<p>To obtain a Symbol, you call the <code>Symbol()</code> function. This
function never returns the same value twice, even when called with the
same argument.</p>
</blockquote>
<blockquote>
<p>This means that if you call Symbol to obtain a Symbol value, you can
safely use that value as a property name to add a new property to an
object and do not need to worry that you might be overwriting an
existing property with the same name.</p>
</blockquote>
<blockquote>
<p>Similarly, if you use symbolic property names and do not share those
symbols, you can be confident that other modules of code in your program
will not accidentally overwrite your properties.</p>
</blockquote>
<p>It’s worth noting that when wanting to share a Symbol with another
module, you can call the method <code>Symbol.for()</code> with a string.
This method returns an existent symbol, or creates a new one, with the
associated string. This is useful when sharing a Symbol between
modules.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> s <span class="op">=</span> <span class="bu">Symbol</span><span class="op">.</span><span class="fu">for</span>(<span class="st">&quot;shared&quot;</span>)<span class="op">;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> t <span class="op">=</span> <span class="bu">Symbol</span><span class="op">.</span><span class="fu">for</span>(<span class="st">&quot;shared&quot;</span>)<span class="op">;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>s <span class="op">===</span> t <span class="co">// &gt; true</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>s<span class="op">.</span><span class="fu">toString</span>() <span class="co">// =&gt; &quot;Symbol(shared)&quot;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="bu">Symbol</span><span class="op">.</span><span class="fu">keyFor</span>(t) <span class="co">// =&gt; &quot;shared&quot;</span></span></code></pre></div>
<p>Regarding the global object:</p>
<blockquote>
<p>Every time a JavaScript interpreter starts (or a web browser opens a
new page), it creates a new global object.</p>
</blockquote>
<blockquote>
<p>In Node, the global object has a property named <code>global</code>
whose value is the global object itself. In web browsers, the
<code>window</code> object serves as the global object, but it includes
extra functionalities specific to web browsers</p>
</blockquote>
<blockquote>
<p>ES2020 finally defines <code>globalThis</code> as the standard way to
refer to the global object in any context.</p>
</blockquote>
<p>Objects are not compared by value. Two distinct objects are not equal
even if all their properties and values are equal.</p>
<p>Two object values are the same if and only if they refer to the same
underlying object.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> o <span class="op">=</span> {<span class="dt">x</span><span class="op">:</span><span class="dv">1</span>}<span class="op">,</span> p <span class="op">=</span> {<span class="dt">x</span><span class="op">:</span><span class="dv">1</span>}<span class="op">;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>o <span class="op">===</span> p <span class="co">// =&gt; false</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> []<span class="op">,</span> b <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>a <span class="op">===</span> b <span class="co">// =&gt; false</span></span></code></pre></div>
<p>Explicit conversions might be useful to make the code clearer.</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="bu">Number</span>(<span class="st">&quot;3&quot;</span>)<span class="op">;</span> <span class="co">// &gt; 3</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="bu">String</span>(<span class="kw">false</span>)<span class="op">;</span> <span class="co">// &gt; &quot;false&quot;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="bu">Boolean</span>([])<span class="op">;</span> <span class="co">// &gt; true</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">// All functions above can</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">// be invoked with `new`</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">// If you use them this way,</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co">// you&#39;ll get a wrapper object</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co">// that behaves just like a primitive</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co">// boolean, number, or string.</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co">// However, those wrappers are just</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co">// a historical leftover from earliest</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co">// JS days, and there is never really</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co">// any good reason to use them.</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co">// ---</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="co">// Another way to convert objects</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="co">// that isn&#39;t so straightforward is</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="co">// the following:</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>x <span class="op">+</span> <span class="st">&quot;&quot;</span> <span class="co">// &gt; String(x)</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="op">+</span>x <span class="co">// &gt; Number(x)</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>x<span class="op">-</span><span class="dv">0</span> <span class="co">// &gt; Number(x)</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="op">!!</span>x <span class="co">// &gt; Boolean(x)</span></span></code></pre></div>
<p>Number formatting for display:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> n <span class="op">=</span> <span class="fl">123456.789</span><span class="op">;</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>n<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">0</span>) <span class="co">// &gt; 123457 (rounded up)</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>n<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">2</span>) <span class="co">// &gt; 123456.79 (rounded up)</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>n<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">5</span>) <span class="co">// &gt; 123456.78900 (padded)</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>n<span class="op">.</span><span class="fu">toExponential</span>(<span class="dv">1</span>) <span class="co">// &gt; 1.2e+5</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>n<span class="op">.</span><span class="fu">toExponential</span>(<span class="dv">4</span>) <span class="co">// &gt; 1.235e+5</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>n<span class="op">.</span><span class="fu">toPrecision</span>(<span class="dv">4</span>) <span class="co">// &gt; 1.235e+5 (same as above)</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>n<span class="op">.</span><span class="fu">toPrecision</span>(<span class="dv">7</span>) <span class="co">// &gt; 123456.8</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co">// In addition to the above,</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co">// the class Intl.NumberFormat</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co">// class defines a more general,</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="co">// internationalised number-formatting.</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="co">// parseInt and parseFloat are more</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="co">// general and can handle hexadecimal.</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="co">// parseFloat can handle both int and float.</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="co">// they both skip leading spaces too.</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a><span class="co">// Those functions try to parse as</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="co">// many numeric characters as they</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="co">// can, and ignore anything that follows.</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="co">// if the first nonspace character is not</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="co">// part of a valid numeric literal, they</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a><span class="co">// return NaN</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a><span class="pp">parseInt</span>(<span class="st">&quot;3 blind mice&quot;</span>)  <span class="co">// &gt; 3</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a><span class="pp">parseFloat</span>(<span class="st">&quot; 3.14 meters&quot;</span>) <span class="co">// &gt; 3.14</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a><span class="pp">parseInt</span>(<span class="st">&quot;-12.34&quot;</span>) <span class="co">// -12</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a><span class="pp">parseInt</span>(<span class="st">&quot;0xFF&quot;</span>) <span class="co">// &gt; 255</span></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a><span class="pp">parseFloat</span>(<span class="st">&quot;.1&quot;</span>) <span class="co">// &gt; 0.1</span></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a><span class="pp">parseInt</span>(<span class="st">&quot;0.1&quot;</span>) <span class="co">// &gt; 0</span></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a><span class="pp">parseInt</span>(<span class="st">&quot;.1&quot;</span>) <span class="co">// &gt; NaN (integers can&#39;t start with &quot;.&quot;</span></span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a><span class="pp">parseFloat</span>(<span class="st">&quot;$72.47&quot;</span>) <span class="co">// NaN: numbers can&#39;t start with &quot;$&quot;</span></span></code></pre></div>
<p>The <code>toString()</code> method:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">// All objects inherit two conversion</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">// methods that are used by object-to-primitive</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">// conversions.</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co">// The first method is `toString()`.</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Its job is to return a string repr</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co">// of the object. The default doesn&#39;t</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">// return a very interesting value.</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>({<span class="dt">x</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span><span class="dv">2</span>})<span class="op">.</span><span class="fu">toString</span>() <span class="co">// &gt; &quot;[object Object]&quot;</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="co">// The toString() method of an Array</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co">// converts each element to string and</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="co">// joins the resulting with commas</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]<span class="op">.</span><span class="fu">toString</span>() <span class="co">// &gt; &quot;1,2,3&quot;</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="co">// the Function converts user-defined</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a><span class="co">// functions to strings.</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>(<span class="kw">function</span>(x) { <span class="fu">f</span>(x)<span class="op">;</span> })<span class="op">.</span><span class="fu">toString</span>() <span class="co">// &gt; &quot;function(x) { f(x); }&quot;</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="co">// dates return a human-readable and</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a><span class="co">// JS-parsable date and time string</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> d <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="dv">2020</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">1</span>)</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="co">// &gt; &quot;Wed Jan 01 2020 00:00:00 GMT+1300 (New Zealand Daylight Time)&quot;</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a><span class="co">// overriting the toString method:</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> point <span class="op">=</span> {</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>  <span class="dt">toString</span><span class="op">:</span> <span class="kw">function</span>() { <span class="cf">return</span> <span class="vs">`(</span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">x</span><span class="sc">}</span><span class="vs">, </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">y</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span> }</span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a><span class="bu">String</span>(point) <span class="co">// &gt; &quot;(1, 2)&quot;</span></span></code></pre></div>
<p>The <code>valueOf()</code> method</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">// The job of this method isn&#39;t well defined.</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co">// It is supposed to convert an object to a</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co">// primitive value that represents the object</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">// if such primitive value exists.</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">// As most objects can&#39;t be represented by</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co">// a single primitive value, so the default</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co">// `valueOf()` method simply returns the</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co">// object itself.</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> d <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="dv">2010</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>d<span class="op">.</span><span class="fu">valueOf</span>()  <span class="co">// &gt; 1577790000000</span></span></code></pre></div>
<p>On <code>let</code>.</p>
<blockquote>
<p>It’s a good programming practice to assign an initial value to your
variables when you declare them, when this is possible:</p>
</blockquote>
<div class="sourceCode" id="cb27"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> message <span class="op">=</span> <span class="st">&quot;hello&quot;</span><span class="op">;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">// You can also declare multiple variables</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> i<span class="op">,</span> sum<span class="op">;</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>i <span class="co">// &gt; undefined</span></span></code></pre></div>
<p>On <code>const</code>.</p>
<blockquote>
<p>To declare a constant instead of a variable use const instead of let.
const works just like let except that you must initialize the constant
when you declare it.</p>
</blockquote>
<blockquote>
<p>Additionally, you can’t change the value of a const. Attempting to,
will raise a TypeError.</p>
</blockquote>
<blockquote>
<p>It is a common (but no universal) convention to declare constants
using names with all capital letters such as H0 or HTTP_NOT_FOUND as a
way to distinguish them from variables.</p>
</blockquote>
<p>When to use const:</p>
<blockquote>
<p>There’re two schools of thought about the use of the const keyword.
One approach is to use const only for values that are fundamentally
unchaning, like physical constants, or program version numbers, or byte
sequences used to identify file types, for example.</p>
<p>Another approach recognizes that many of the so-called variables in
our program don’t actually ever change as our program runs. In this
approach, we declare everything with const, and then if we find that we
do actually want to allow the value to vary, we switch the declaration
to let. This may help prevent bugs by ruling out accidental changes to
variables that we did not intend.</p>
<p>In one approach, we use const only for values that must not change.
In the other, we use const for any value that does not happen to change.
I prefer the former approach in my own code.</p>
</blockquote>
<p>Surprisingly <code>const</code> can be used in the body of loops. In
this case, it means that the body of the loop doesn’t reassign a new
value to that const.</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(<span class="kw">const</span> datum <span class="kw">of</span> data) <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(datum)<span class="op">;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(<span class="kw">const</span> property <span class="kw">in</span> object) <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(property)<span class="op">;</span></span></code></pre></div>
<p>Repeated declarations:</p>
<p>It is a syntax error to use the same name with more than one let or
const declaration in the same scope. It is legal (though a practice best
avoided) to declare a new variable with the same name in a nested
scope:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> x <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// global constant</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="op">===</span> <span class="dv">1</span>) {</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> x <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// inside a block `x` can refer to a different value</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(x)<span class="op">;</span> <span class="co">// &gt; 2</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(x)<span class="op">;</span> <span class="co">// &gt; 1</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> x <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="co">// SyntaxError. Identifier &#39;x&#39; has already been declared.</span></span></code></pre></div>
<p>Differences between <code>var</code> and <code>let</code>:</p>
<ul>
<li>Variables declared with <code>var</code> do not have block scope.
Instead, they are scoped to the body of the containing function no
matter how deeply nested they are inside that function.</li>
<li>If you use <code>var</code> outside of a function body, it declares
a global variable. But global variables declared with <code>var</code>
differs from globals declared with <code>let</code> in an important way.
Globals declared with var are implemented as properties of the global
object. The global object can be referenced as globalThis. So if you
write <code>var x = 2;</code> outside of a function, it is like you
wrote <code>globalThis.x = 2;</code>. Note that the analogy isn’t
perfect: the properties created with global var declarations cannot be
deleted with the delete operator. Global variables and constants
declared with let and const are not properties of the global
object.</li>
<li>Unlike variables declared with let, it is legal to declare the same
variable multiple times with var. And because var variables have
function scope instead of block scope, it is actually common to do this
kind of redeclaration. The variable <code>i</code> is frequently used
for integer values, and specially as the index variable of
<code>for</code> loops. In a function with multiple for loops, it is
typical for each one to begin <code>for(var i = 0; ...</code>. Because
var does not scope these variables to the loop body, each of these loops
is (harmlessly) re-declaring and re-initialising the same variable.</li>
<li>One of the most unusual features of var declarations is known as
<code>hoisting</code>. When a variable is declared with var, the
declaration is lifted up (or “hoisted”) to the top of the enclosing
function. The initialisation of the variable remains where you wrote it,
but the definition of the variable moves to the top of the function. So
variables declared with var can be used, without error, anywhere in the
enclosing function. If the initialisation code has not run yet, then the
value of the variable may be undefined, but you won’t get an error if
you use the variable before it is initialised. This can be a source of
bugs and is one important misfeature that let corrects: if you declare a
variable with let but attempt to use it before the let statement runs,
you will get an actual error instead of just seeing an undefined
value).</li>
</ul>
<p>Using undeclared variables in strict mode:</p>
<blockquote>
<p>In strict mode, if you attempt to use an undeclared variable, you’ll
get a reference error when you run your code. Outside of strict mode,
however, if you assign a value to a name that has not been declared with
let, const, or var, you’ll end up creating a new global variable. It
will be a global no matter how deeply nested within functions and blocks
your code is, which is almost certainly not what you want, is bug-prone,
and is one of the best reasons for using strict mode.</p>
</blockquote>
<blockquote>
<p>Global variables created in this accidental way are like global
variables declare with var: they define properties of the global object.
But unlike the properties defined by proper var declarations, these
properties can be delted with the delete operator.</p>
</blockquote>
<p>On destructuring assignment</p>
<blockquote>
<p>ES6 implements a compound declaration and assignment syntax know as
destructuring assignment. In destructuring assignment, the value on the
righthand side of the equals sign is an array or object (a “structured”
value), and the lefthand side specifies one or more variable names using
a syntax that mimics array and object literal syntax.</p>
</blockquote>
<div class="sourceCode" id="cb30"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> [x<span class="op">,</span>y] <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span>]<span class="op">;</span> <span class="co">// same as let x=1, y=2;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>[x<span class="op">,</span>y] <span class="op">=</span> [x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span>]<span class="op">;</span> <span class="co">// same as x = x + 1, y = y + 1;</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>[x<span class="op">,</span> y] <span class="op">=</span> [y<span class="op">,</span> x]<span class="op">;</span> <span class="co">// swap the value of two variables.</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> [a<span class="op">,</span> [b<span class="op">,</span>c]] <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> [<span class="dv">2</span><span class="op">,</span><span class="fl">2.5</span>]<span class="op">,</span> <span class="dv">3</span>] <span class="co">// &gt; a==1, b==2, c==2.5 (3 is ignored).</span></span></code></pre></div>
<p>Destructuring assignment makes it easy to work with functions that
return arrays of values:</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Convert [x,y] coordinates</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co">// to [r, theta] polar coordinates</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">toPolar</span>(x<span class="op">,</span> y) {</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [<span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(x<span class="op">*</span>x<span class="op">+</span>y<span class="op">*</span>y)<span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">atan2</span>(y<span class="op">,</span>x)]<span class="op">;</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co">// convert polar to cartesian</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">toCartesian</span>(r<span class="op">,</span> theta) {</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [r<span class="op">*</span><span class="bu">Math</span><span class="op">.</span><span class="fu">cos</span>(theta)<span class="op">,</span> r<span class="op">*</span><span class="bu">Math</span><span class="op">.</span><span class="fu">sin</span>(theta)]<span class="op">;</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> [r<span class="op">,</span> theta] <span class="op">=</span> <span class="fu">toPolar</span>(<span class="fl">1.0</span><span class="op">,</span> <span class="fl">1.0</span>)<span class="op">;</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> [x<span class="op">,</span>y] <span class="op">=</span> <span class="fu">toCartesian</span>(r<span class="op">,</span> theta)<span class="op">;</span></span></code></pre></div>
<p>Destructuring assignment also works in loops.</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">// similar to dict.values() in Python.</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> o <span class="op">=</span> { <span class="dt">x</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span><span class="dv">2</span> }<span class="op">;</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(<span class="kw">const</span> [key<span class="op">,</span> value] <span class="kw">of</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">entries</span>(o)) {</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(key<span class="op">,</span> value)<span class="op">;</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Gotcha about Destructuring assignments:</p>
<blockquote>
<p>The number of variables on the left of a destructuring assignment
does not have to match the number of array elements on the right. Extra
variables on the left are set to undefined, and extra values on the
right are ignored. The list of variables on the left can include extra
commas to skip certain values on the right.</p>
</blockquote>
<div class="sourceCode" id="cb33"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> [x<span class="op">,</span>y] <span class="op">=</span> [<span class="dv">1</span>] <span class="co">// x == 1, y == undefined</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>[x<span class="op">,</span>y] <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>] <span class="co">// x == 1, y == 2</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>[<span class="op">,</span>x<span class="op">,,</span>y] <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span>] <span class="co">// x == 2, y == 4</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co">// If you want to collect all unused or</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="co">// remaining values into a single variable</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co">// when destructuring an array, use (...)</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co">// three dots, before the last variable name</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co">// on the left hand side.</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> [x<span class="op">,</span> <span class="op">...</span>y] <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span>]<span class="op">;</span> <span class="co">// x == 1, y == [2,3,4]</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="co">// Also works with iterables</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> [first<span class="op">,</span> <span class="op">...</span>rest] <span class="op">=</span> <span class="st">&quot;hello&quot;</span> <span class="co">// first == &quot;h&quot;, rest == [&quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot;]</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="co">// and with object values.</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> transparent <span class="op">=</span> {<span class="dt">r</span><span class="op">:</span> <span class="fl">0.0</span><span class="op">,</span> <span class="dt">g</span><span class="op">:</span> <span class="fl">0.0</span><span class="op">,</span> <span class="dt">b</span><span class="op">:</span><span class="fl">0.0</span>}<span class="op">;</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> {r<span class="op">,</span> g<span class="op">,</span> b} <span class="op">=</span> transaprent <span class="co">// r == 0.0, g == 0.0, b == 0.0</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a><span class="co">// and with object methods into variables</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a><span class="co">// of the same name</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> {sin<span class="op">,</span> cos<span class="op">,</span> tan} <span class="op">=</span> <span class="bu">Math</span><span class="op">;</span> <span class="co">// sin==Math.sin, cos==Math.cos, ...</span></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a><span class="co">// or with key value pairs for renaming it.</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> { <span class="dt">cos</span><span class="op">:</span> cosine<span class="op">,</span> <span class="dt">tan</span><span class="op">:</span> tangent } <span class="op">=</span> <span class="bu">Math</span><span class="op">;</span></span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a><span class="co">// &quot;I find that object destructuring syntax</span></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a><span class="co">// becomes too complicated to be useful when</span></span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a><span class="co">// the variable names and property names are</span></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a><span class="co">// not the same.&quot; The author.</span></span></code></pre></div>
<h2 id="chapter-4">Chapter 4</h2>
<h3 id="expressions-and-operators">Expressions and Operators</h3>
<p>Array initialisers:</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Undefined elements can be included</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co">// in an array literal by simply omitting a</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">// value between commas</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> sparseArray <span class="op">=</span> [<span class="dv">1</span><span class="op">,,,,</span><span class="dv">5</span>]<span class="op">;</span></span></code></pre></div>
<p>Conditional property access <code>?.</code> and <code>?.[]</code></p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> { <span class="dt">b</span><span class="op">:</span> <span class="kw">null</span> }<span class="op">;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="at">b</span> <span class="co">// &gt; null</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">// a is an object, so a.b is a valid</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">// property. But the value of a.b is</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">// null, so a.b.c would throw a TypeError.</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">// By using a.b?.c, now c evaluates to</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co">// undefined. This means that (a.b?.c).d</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">// will throw a TypeError because the</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">// expression attempts to access a property</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co">// of the value undefined.</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="co">// However, and this is an important gotcha,</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co">// a.b?.c.d (without the parentheses) simply</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="co">// evaluates to `undefined` and does not throw</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co">// an error. This is because property access</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="co">// with ?. is &quot;short-circuiting&quot;. If the</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="co">// subexpression to the left of ?. evaluates</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="co">// to null or undefined, then the entire</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="co">// expression immediately evaluates to</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="co">// undefined without any further property access</span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="co">// attempts.</span></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="at">b</span><span class="op">?.</span><span class="at">c</span><span class="op">.</span><span class="at">d</span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a><span class="co">// Of course, if a.b is an object, and if that</span></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a><span class="co">// object has no property named c, then a.b?.c.d</span></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a><span class="co">// will again throw a TypeError. Thus:</span></span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> { <span class="dt">b</span><span class="op">:</span> {} }<span class="op">;</span></span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="at">b</span><span class="op">?.</span><span class="at">c</span><span class="op">?.</span><span class="at">d</span> <span class="co">// &gt; undefined</span></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a><span class="co">// now with arrays:</span></span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a<span class="op">;</span></span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> index <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span> {</span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>  a[index<span class="op">++</span>]<span class="op">;</span> <span class="co">// throws TypeError</span></span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>} <span class="cf">catch</span>(e) {</span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a>  index <span class="co">// &gt; 1: increment occurs before TypeError</span></span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a>a<span class="op">?.</span>[index<span class="op">++</span>] <span class="co">// undefined because a is undefined</span></span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a>index <span class="co">// &gt; 1: not incremented because ?.[] short-circuits</span></span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a>a[index<span class="op">++</span>] <span class="co">// TypeError: can&#39;t index undefined.</span></span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a>index <span class="co">// &gt; 2: incremented the index first.</span></span></code></pre></div>
<p>Conditional invocation with <code>?.()</code>.</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">// before ES2020</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">square</span>(x<span class="op">,</span> log) {</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (log) {</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">log</span>(x)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x<span class="op">*</span>x<span class="op">;</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co">// after ES2020</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">square</span>(x<span class="op">,</span> log) {</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  log<span class="op">?.</span>(x)<span class="op">;</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">*</span> x</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="co">// note that ?.() only checks whether</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a><span class="co">// the lefthand side is null or undefined.</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a><span class="co">// It does not verify that the value is actually</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="co">// a function. So the `square()` function in</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a><span class="co">// this example would still throw an exception if</span></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a><span class="co">// you passed two numbers to it, for example.</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a><span class="co">// like conditional property access, the ?.()</span></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a><span class="co">// is short-circuiting. If the value to the left</span></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a><span class="co">// of ?. is null or undefined, then none of the</span></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a><span class="co">// argument expressions within the parenthesis</span></span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a><span class="co">// are evaluated.</span></span></code></pre></div>
<p>On <code>==</code> (equality operator) and <code>===</code> (strict
equality operator):</p>
<blockquote>
<p>The == operator is a legacy feature of JavaScript and is widely
considered to be a source of bugs. You should almost always use ===
instead of ==, and !== instead of !=.</p>
</blockquote>
<p>The <code>in</code> operator:</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> point <span class="op">=</span> {<span class="dt">x</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span><span class="dv">1</span>}<span class="op">;</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;x&quot;</span> <span class="kw">in</span> point <span class="co">// &gt; true</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;z&quot;</span> <span class="kw">in</span> point <span class="co">// &gt; false (no property with this name)</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;toString&quot;</span> <span class="kw">in</span> point <span class="co">// &gt; true</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> data <span class="op">=</span> [<span class="dv">7</span><span class="op">,</span><span class="dv">8</span><span class="op">,</span><span class="dv">9</span>]<span class="op">;</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;0&quot;</span> <span class="kw">in</span> data <span class="co">// true (surprisingly different than Python)</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="kw">in</span> data <span class="co">// true</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="kw">in</span> data <span class="co">// false (no element 3)</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span> <span class="kw">in</span> data <span class="co">// false (no element 7)</span></span></code></pre></div>
<p>The <code>instanceof</code> operator:</p>
<blockquote>
<p>Note, <code>instanceof</code> considers multiple inheritance.</p>
</blockquote>
<div class="sourceCode" id="cb38"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> d <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">;</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>d <span class="kw">instanceof</span> <span class="bu">Date</span> <span class="co">// true</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>d <span class="kw">instanceof</span> <span class="bu">Object</span> <span class="co">// true. All objects are instance of Object</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>a <span class="kw">instanceof</span> <span class="bu">Array</span> <span class="co">// true</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>a <span class="kw">instanceof</span> <span class="bu">Object</span> <span class="co">// true arrays are objects.</span></span></code></pre></div>
<p>The first-defined operator <code>??</code>.</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">// the ?? operator is equivalent to</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>(a <span class="op">!==</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> a <span class="op">!==</span> <span class="kw">undefined</span>) <span class="op">?</span> a <span class="op">:</span> b</span></code></pre></div>
<p><code>??</code> is a useful alternative to || when you want to select
the first <em>defined</em> operand rather than the first truthy
operand.</p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">// the problem with the following is that</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co">// if maxWidth is set to 0, it will be ignored</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> max <span class="op">=</span> maxWidth <span class="op">||</span> preferences<span class="op">.</span><span class="at">maxWidth</span> <span class="op">||</span> <span class="dv">500</span><span class="op">;</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co">// However, if maxWidth is 0, now</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co">// it won&#39;t be ignored</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> max <span class="op">=</span> maxWidth <span class="op">??</span> preferences<span class="op">.</span><span class="at">maxWidth</span> <span class="op">??</span> <span class="dv">500</span><span class="op">;</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co">// other useful examples</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> options <span class="op">=</span> {<span class="dt">timeout</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">title</span><span class="op">:</span> <span class="st">&quot;&quot;</span><span class="op">,</span> <span class="dt">verbose</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">n</span><span class="op">:</span> <span class="kw">null</span>}</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>options<span class="op">.</span><span class="at">timeout</span> <span class="op">??</span> <span class="dv">1000</span> <span class="co">// &gt; 0</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>options<span class="op">.</span><span class="at">title</span> <span class="op">??</span> <span class="st">&quot;Untitled&quot;</span> <span class="co">// &gt; &quot;&quot;</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>options<span class="op">.</span><span class="at">verbose</span> <span class="op">??</span> <span class="kw">true</span> <span class="co">// &gt; false</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>options<span class="op">.</span><span class="at">quiet</span> <span class="op">??</span> <span class="kw">false</span> <span class="co">// false</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>options<span class="op">.</span><span class="at">n</span> <span class="op">??</span> <span class="dv">10</span> <span class="co">// 10 (property is null)</span></span></code></pre></div>
<p>The <code>delete</code> operator</p>
<div class="sourceCode" id="cb41"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> o <span class="op">=</span> { <span class="dt">x</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">2</span> }<span class="op">;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="kw">delete</span> o<span class="op">.</span><span class="at">x</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;x&quot;</span> <span class="kw">in</span> o <span class="co">// &gt; false</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="kw">delete</span> a[<span class="dv">2</span>]</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="kw">in</span> a <span class="co">// &gt; false</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co">// deleting an array element leaves a</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="co">// &quot;hole&quot; in the array and does not change</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="co">// the array&#39;s length.</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="at">length</span> <span class="co">// &gt; 3</span></span></code></pre></div>
<h2 id="chapter-5">Chapter 5</h2>
<h3 id="statements">Statements</h3>
<p>The empty statement allows you to include no statements where one is
expected.</p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">// empty statements are represented</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co">// by a single semi colon &quot;;&quot;</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co">// this for loop, for example, changes</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co">// the array elements to zero.</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(<span class="kw">let</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> a<span class="op">.</span><span class="at">length</span><span class="op">;</span> a[i<span class="op">++</span>] <span class="op">=</span> <span class="dv">0</span>) <span class="op">;</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Note that the inclusion of a</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co">// semicolon after the right</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="co">// parenthesis of a for loop, while</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a><span class="co">// loop, or if statement can cause</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="co">// a lot of frustrating bugs.</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a><span class="co">// for example:</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> ((a<span class="op">===</span><span class="dv">0</span>) <span class="op">||</span> (b<span class="op">===</span><span class="dv">0</span>))<span class="op">;</span> <span class="co">// this line does nothing</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>  o <span class="op">=</span> <span class="kw">null</span><span class="op">;</span> <span class="co">// thus this line is _always_ executed</span></span></code></pre></div>
<p>Looping with <code>for of</code> or <code>for/of</code></p>
<div class="sourceCode" id="cb43"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">// ES6 defines for/of</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co">// It is different from for/in.</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co">// for/of works with iterables</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co">// arrays, strings, sets, and maps are iterables.</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> data <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">5</span><span class="op">,</span><span class="dv">6</span><span class="op">,</span><span class="dv">7</span><span class="op">,</span><span class="dv">8</span><span class="op">,</span><span class="dv">9</span>]<span class="op">,</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">let</span> element <span class="kw">of</span> data) {</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  sum <span class="op">+=</span> element</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>sum <span class="co">// =&gt; 45</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="co">// Objects are not (by default) iterable.</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> o <span class="op">=</span> {<span class="dt">x</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">z</span><span class="op">:</span> <span class="dv">3</span>}<span class="op">;</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">let</span> element <span class="kw">of</span> o) { <span class="co">// TypeError: o is not iterable</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(element)<span class="op">;</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a><span class="co">// for doing the above you can just</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a><span class="co">// use the for/in loop, or use</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a><span class="co">// Object.keys(), Object.values():</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">let</span> element <span class="kw">of</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">keys</span>(o)) {</span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(element) <span class="co">// prints x \n y \n z</span></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a><span class="co">// Or Object.entries() if you are interested</span></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a><span class="co">// in both keys and values:</span></span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">let</span> [k<span class="op">,</span> v] <span class="kw">of</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">entries</span>(o)) {</span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(k <span class="op">+</span> <span class="st">&quot;:&quot;</span> <span class="op">+</span> v)<span class="op">;</span> <span class="co">// x:1 x:2 x:3</span></span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a><span class="co">// the above is similar to dict.items() in Python.</span></span></code></pre></div>
<p>Looping with <code>for in</code> or <code>for/in</code></p>
<p>Gotchas: &gt; Enumerable inherited properties are enumerated by the
for/in loop. This means &gt; that if you use for/in loops and also use
code that defines properties that are &gt; inherited by all objects,
then your loop may not behave in the way you expect. &gt; This is the
reason many programmers prefer to use a for/of loop with &gt;
Object.keys() instead of a for/in loop.</p>
<div class="sourceCode" id="cb44"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">// while a for/of requires an iterable,</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co">// for/in works with any object.</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co">// for/in loops through the property</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="co">// of an object.</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> o <span class="op">=</span> {<span class="dt">x</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">z</span><span class="op">:</span> <span class="dv">3</span>}<span class="op">;</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">let</span> element <span class="kw">in</span> o) {</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(element)<span class="op">;</span> <span class="co">// prints x \n y \n z</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Gotcha: for arrays it returns the</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="co">// index numbers in an array. This is</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="co">// a common source of bugs. More often than</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a><span class="co">// not you want to use for/of for arrays:</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> l <span class="op">=</span> [<span class="st">&quot;a&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="fl">3.14</span>]<span class="op">;</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">let</span> index <span class="kw">in</span> l) {</span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(index)<span class="op">;</span>  <span class="co">// 0 \n 1 \n 2</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a><span class="co">// on enumarable inherited properties:</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a><span class="co">// Somewhere deep in your JavaScript library...</span></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a><span class="bu">Array</span><span class="op">.</span><span class="at">prototype</span><span class="op">.</span><span class="at">foo</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a><span class="co">// Now you have no idea what the below code will do.</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span>]<span class="op">;</span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">let</span> x <span class="kw">in</span> a){</span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Now foo is a part of EVERY array and</span></span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">// will show up here as a value of &#39;x&#39;.</span></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(x)<span class="op">;</span> <span class="co">// 1,2,3,4,5,foo</span></span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">let</span> x <span class="kw">of</span> a){</span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a>  <span class="co">// this actually does what you wanted!</span></span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(x)<span class="op">;</span> <span class="co">// 1,2,3,4,5</span></span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a><span class="co">// to safeguard against enumareting inherited</span></span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a><span class="co">// properties you can:</span></span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="kw">in</span> object) {</span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">!</span>(object<span class="op">.</span><span class="fu">hasOwnProperty</span>(i)) <span class="cf">continue</span></span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a>  <span class="co">// you might also want to skip functions</span></span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">!</span>(<span class="kw">typeof</span> object[i] <span class="op">===</span> <span class="st">&#39;function&#39;</span>) <span class="cf">continue</span></span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Labelled statements</p>
<p>By labelling a statement, you give it a name that you can refer back
somewhere else in the program.</p>
<blockquote>
<p>break and continue are the only JS statements that use statement
labels.</p>
</blockquote>
<div class="sourceCode" id="cb45"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>mainloop<span class="op">:</span> <span class="cf">while</span>(token <span class="op">!==</span> <span class="kw">null</span>) {</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">continue</span> mainloop<span class="op">;</span> <span class="co">// jump back to the top</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>JavaScript exception triggered uses <code>throw</code></p>
<div class="sourceCode" id="cb46"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">factorial</span>(x) {</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (f <span class="op">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&quot;x must not be negative&quot;</span>)<span class="op">;</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// otherwise compute a value normally.</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (f <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> x <span class="op">&gt;</span> <span class="dv">1</span><span class="op">;</span> f <span class="op">*=</span> x<span class="op">,</span> x<span class="op">--</span>) <span class="co">/* empty */</span> <span class="op">;</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> f</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Gotcha about <code>try/catch/finally</code></p>
<p>The finally block is always executed regardless of what happens in
the try block. If the interpreter left the try block because of a
return, continue, or break, the finally block is executed before the
interpreter jumps to its new destination.</p>
<p>Similarly, the interpreter first executes the catch block and then
the finally block. If no catch block is there to handle an exception,
the interpreter first executes the finally block and then jumps to the
nearest containing catch clause.</p>
<p><strong>try and finally</strong> can be used without a catch clause.
In this case, the finally block is simply clean-up code that is
guaranteed to be executed.</p>
<hr />
<p>The <code>with</code> statement runs a block of code as if the
properties of an object were variables in the scope of that code.</p>
<blockquote>
<p>However, the with statement is forbidden in strict mode, and should
be considered deprecated in non-strict mode. JS code that uses with is
difficult to optimise and is likely to run slower than the equivalent
code without the with statement.</p>
</blockquote>
<div class="sourceCode" id="cb47"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> (object)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  statement</span></code></pre></div>
<hr />
<p>The <code>debugger</code> statement is the effective way of adding
breakpoints in JS code.</p>
<div class="sourceCode" id="cb48"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">f</span>(o) {</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (o <span class="op">===</span> <span class="kw">undefined</span>) <span class="cf">debugger</span><span class="op">;</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<p><code>use strict</code>. The strict mode is a restricted subset of
the language that fixes important deficiencies, providing stronger error
checking and increased security.</p>
<blockquote>
<p>The purpose of a “use strict” directive is to indicate that the code
that follows is strict code.</p>
</blockquote>
<blockquote>
<p>In addition to code explicitly declared to be strict, any code in a
<strong>class</strong> body or in an ES6 module is automatically strict
code. This means that if all of your JS code is written as modules, then
it is all automatically strict, and you will never need to use an
explicit “use strict” directive.</p>
</blockquote>
<p>Rules:</p>
<ul>
<li>The <strong>with</strong> statement is not allowed.</li>
<li>All variables must be declared, otherwise ReferenceError is thrown.
Remember that in non-strict mode, this implicit variable declares a
global variable by adding a new property to the global object.</li>
<li>Functions invoked as functions (rather than as methods) have a
<strong>this</strong> value of undefined. In non-strict mode,
<strong>this* is the global object. Also, for functions invoked with
call() or apply(), </strong>this** is the value passed as the first
argument to these functions. In non strict-mode, null and undefined
values are replaced with the global object.</li>
</ul>
<p>For more items, refer to section 5.6.3 of the book!</p>
<hr />
<p><code>var</code></p>
<blockquote>
<p>Variables declared with var are scoped to the containing function
rather than the containing block. In modern JS there is really no reason
to use var instead of let</p>
</blockquote>
<h2 id="chapter-6">Chapter 6</h2>
<h3 id="objects">Objects</h3>
<blockquote>
<p>An object is an unordered collection of properties, each of which has
a name and a value.</p>
</blockquote>
<blockquote>
<p>It is sometimes important to be able to distinguish between
properties defined by the object and properties defined by its
prototype. JS uses the term own property for the non-inherited
properties.</p>
</blockquote>
<p>In addition to its name and value, each property has three property
attributes: 1. The writeable attribute specifies whether the value of a
property can be set. 2. The enumerable attribute specifies whether the
property name is returned by a for/in loop. 3. The configurable
attribute specifies whether the property can be deleted and whether its
attributes can be altered.</p>
<hr />
<p><code>object literal</code>: The simple JS objects defined by
comma-separated key-pair values. Like a Python dictionary.</p>
<hr />
<p><code>Object.create()</code></p>
<blockquote>
<p>One use for Object.create() is when you want to guard against
unintended (but non-malicious) modification of an object by a library
function that you don’t have control over. Instead of passing the object
directly to the function, you can pass an object that inherits from it.
If the function reads properties of that object, it will see the
inherited values. If it sets properties, however, those writes will not
affect the original object.</p>
</blockquote>
<div class="sourceCode" id="cb49"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> o <span class="op">=</span> {<span class="dt">x</span><span class="op">:</span><span class="st">&quot;don&#39;t change this value&quot;</span>}<span class="op">;</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>library<span class="op">.</span><span class="fu">function</span>(<span class="bu">Object</span><span class="op">.</span><span class="fu">create</span>(o))<span class="op">;</span> <span class="co">// guard against accidental modifications.</span></span></code></pre></div>
<hr />
<p><code>Object.assign()</code> Extending objects is a common
operation.</p>
<div class="sourceCode" id="cb50"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>(o<span class="op">,</span> defaults) <span class="co">// overwrites everything in o with defaults</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Creates a new object,</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co">// copies the defaults into it,</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co">// and then override those defaults with the properties</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="co">// in o.</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>o <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">assign</span>({}<span class="op">,</span> defaults<span class="op">,</span> o)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="co">// Same as the above:</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>o <span class="op">=</span> {<span class="op">...</span>defaults<span class="op">,</span> <span class="op">...</span>o}<span class="op">;</span></span></code></pre></div>
<hr />
<p>Computed Property Names</p>
<p>Sometimes you need to use the value of a variable as the key to an
object:</p>
<div class="sourceCode" id="cb51"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> PROPERTY_NAME <span class="op">=</span> <span class="st">&quot;p1&quot;</span><span class="op">;</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co">// wrong!</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> o <span class="op">=</span> {<span class="dt">PROPERTY_NAME</span><span class="op">:</span> <span class="dv">1</span>} <span class="co">// {&quot;PROPERTY_NAME&quot;: 1}</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co">// correct!</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> oo { [PROPERTY_NAME]<span class="op">:</span> <span class="dv">1</span> } <span class="co">// {&quot;p1&quot;: 1}</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co">// The above also works with symbols</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> extension <span class="op">=</span> <span class="bu">Symbol</span>(<span class="st">&quot;my extension symbol&quot;</span>)<span class="op">;</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> oo <span class="op">=</span> { [extension]<span class="op">:</span> <span class="st">&quot;data&quot;</span> }<span class="op">;</span></span></code></pre></div>
<hr />
<p>Spread Operator: <code>...</code></p>
<p>In ES2018 and later you can copy the properties of an existing object
into a new object using the spread operator:</p>
<div class="sourceCode" id="cb52"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> position <span class="op">=</span> {<span class="dt">x</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span><span class="dv">0</span>}<span class="op">;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> dimensions <span class="op">=</span> {<span class="dt">width</span><span class="op">:</span><span class="dv">100</span><span class="op">,</span> <span class="dt">height</span><span class="op">:</span><span class="dv">75</span>}<span class="op">;</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> rect <span class="op">=</span> {<span class="op">...</span>position<span class="op">,</span> <span class="op">...</span>dimensions}<span class="op">;</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>rect<span class="op">.</span><span class="at">x</span> <span class="op">+</span> r<span class="op">.</span><span class="at">height</span> <span class="co">// 76</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co">// note that spread operator only spreads</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="co">// own properties of an object, not any</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="co">// inherited ones via prototype.</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> o <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">create</span>({<span class="dt">x</span><span class="op">:</span> <span class="dv">1</span>})<span class="op">;</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> p <span class="op">=</span> { <span class="op">...</span>o }<span class="op">;</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>p<span class="op">.</span><span class="at">x</span> <span class="co">// undefined</span></span></code></pre></div>
<hr />
<p><code>get</code> and <code>set</code></p>
<div class="sourceCode" id="cb53"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> p <span class="op">=</span> {</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> <span class="fl">1.0</span><span class="op">,</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> <span class="fl">1.0</span><span class="op">,</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// getter and setter (read-write property)</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  get <span class="fu">r</span>() { <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">hypot</span>(<span class="kw">this</span><span class="op">.</span><span class="at">x</span><span class="op">,</span> <span class="kw">this</span><span class="op">.</span><span class="at">y</span>) }<span class="op">,</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  set <span class="fu">r</span>(newvalue) {</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> oldvalue <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">hypot</span>(<span class="kw">this</span><span class="op">.</span><span class="at">x</span><span class="op">,</span> <span class="kw">this</span><span class="op">.</span><span class="at">y</span>)<span class="op">;</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> ratio <span class="op">=</span> newvalue<span class="op">/</span>oldvalue<span class="op">;</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">*=</span> ratio<span class="op">;</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">y</span> <span class="op">*=</span> ratio<span class="op">;</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">// read-only property:</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>  get <span class="fu">theta</span>() { <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">atan2</span>(<span class="kw">this</span><span class="op">.</span><span class="at">y</span><span class="op">,</span> <span class="kw">this</span><span class="op">.</span><span class="at">x</span>) }<span class="op">,</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="chapter-7">Chapter 7</h2>
<h3 id="arrays">Arrays</h3>
<ul>
<li>An array is an ordered collection of values</li>
<li>JavaScript arrays are untyped. I.e., an array element may be of any
type, and different elements of the same array may be of different
types.</li>
<li>An array cannot have more than 2**32 - 2 = 4294967294 indexes.</li>
<li>Arrays may be sparse: The elements need not have contiguous indexes,
and there may be gaps</li>
</ul>
<div class="sourceCode" id="cb54"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> sparse_array <span class="op">=</span> [<span class="dv">1</span><span class="op">,,</span><span class="dv">3</span>] <span class="co">// No element at index 1, length = 3.</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> ten_elements_sparse <span class="op">=</span> <span class="kw">new</span> <span class="bu">Array</span>(<span class="dv">10</span>)<span class="op">;</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> non_sparse <span class="op">=</span> <span class="kw">new</span> <span class="bu">Array</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>non_sparse <span class="co">// [1, 2]</span></span></code></pre></div>
<hr />
<p>Spread operator on Arrays</p>
<div class="sourceCode" id="cb55"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co">// spread operator over arrays:</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> b <span class="op">=</span> [<span class="dv">0</span><span class="op">,</span> <span class="op">...</span>a<span class="op">,</span> <span class="dv">4</span>]<span class="op">;</span> <span class="co">// [0,1,2,3,4]</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="co">// useful for shallow copies</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> original <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> copy <span class="op">=</span> [<span class="op">...</span>original]<span class="op">;</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>copy[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="co">// modifying the copy doesn&#39;t change the original.</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="co">// true copy</span></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> another_copy <span class="op">=</span> <span class="kw">new</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(original)<span class="op">;</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a><span class="co">// you can use spread to turn strings into array:</span></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> digits <span class="op">=</span> [<span class="op">...</span><span class="st">&quot;01234567890&quot;</span>]</span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>digits <span class="co">// &gt; [&#39;0&#39;,&#39;1&#39;,&#39;2&#39;,...,&#39;0&#39;];</span></span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a><span class="co">// turn array to set and back to array:</span></span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> letters <span class="op">=</span> [<span class="op">...</span><span class="st">&quot;hello world&quot;</span>]<span class="op">;</span></span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>[<span class="op">...</span><span class="kw">new</span> <span class="bu">Set</span>(letters)] <span class="co">// [&quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, ..., &quot;d&quot;]</span></span></code></pre></div>
<hr />
<p><code>push</code> and <code>pop</code> on Arrays</p>
<div class="sourceCode" id="cb56"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">push</span>(<span class="st">&quot;zero&quot;</span>) <span class="co">// a = [&quot;zero&quot;]</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> b <span class="op">=</span> a<span class="op">.</span><span class="fu">pop</span>() <span class="co">// a = []</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>b <span class="co">// &quot;zero&quot;</span></span></code></pre></div>
<hr />
<p>Array <code>entries</code></p>
<blockquote>
<p>Useful for when you need both the index and the element of the
array.</p>
</blockquote>
<div class="sourceCode" id="cb57"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> everyother <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">let</span> [index<span class="op">,</span> letter] <span class="kw">of</span> letters<span class="op">.</span><span class="fu">entries</span>()) {</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (index <span class="op">%</span> <span class="dv">2</span> <span class="op">===</span> <span class="dv">0</span>) everyother <span class="op">+=</span> letter</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<p><code>forEach</code></p>
<blockquote>
<p>The difference between forEach and for/of is that the first is aware
of sparse arrays and does not invoke your function for elements that are
not there.</p>
</blockquote>
<div class="sourceCode" id="cb58"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> data <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">5</span>]<span class="op">,</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>data<span class="op">.</span><span class="fu">forEach</span>(value <span class="kw">=&gt;</span> {sum <span class="op">+=</span> value})<span class="op">;</span> <span class="co">// sum == 15</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co">// with two entries</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>data<span class="op">.</span><span class="fu">forEach</span>(</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  (value<span class="op">,</span> index) <span class="kw">=&gt;</span> {</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    sum <span class="op">+=</span> value<span class="op">;</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(index)<span class="op">;</span> <span class="co">// 1 \n 2 \n 3...</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span> <span class="co">// sum == 15</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a><span class="co">// Finally, forEach can be called with 3 arguments:</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a><span class="co">// the value of the element, the index,</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a><span class="co">// and the array itself:</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>data<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span>(v<span class="op">,</span> i<span class="op">,</span> a) { a[i] <span class="op">=</span> v <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> })<span class="op">;</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>data <span class="co">// data == [2,3,4,5,6]</span></span></code></pre></div>
<hr />
<p><code>map</code></p>
<blockquote>
<p>Returns a new array with the mapped values</p>
</blockquote>
<div class="sourceCode" id="cb59"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">map</span>(x <span class="kw">=&gt;</span> x<span class="op">*</span>x) <span class="co">// [1, 4, 9]</span></span></code></pre></div>
<hr />
<p><code>filter</code></p>
<blockquote>
<p>Returns a new array containing a subset of filtered values for the
array.</p>
</blockquote>
<div class="sourceCode" id="cb60"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> [<span class="dv">5</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">filter</span>(x <span class="kw">=&gt;</span> x <span class="op">&lt;</span> <span class="dv">3</span>) <span class="co">// [2, 1]</span></span></code></pre></div>
<hr />
<p><code>find</code> and <code>findIndex</code></p>
<blockquote>
<p>Like filter() but shortcuts when the first predicade finds an
element. Returns the element</p>
</blockquote>
<div class="sourceCode" id="cb61"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">5</span>]<span class="op">;</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">find</span>(x <span class="kw">=&gt;</span> x <span class="op">%</span> <span class="dv">5</span> <span class="op">===</span> <span class="dv">0</span>) <span class="co">// 5</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">find</span>(x <span class="kw">=&gt;</span> x <span class="op">%</span> <span class="dv">7</span> <span class="op">===</span> <span class="dv">0</span>) <span class="co">// undefined</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">findIndex</span>(x <span class="kw">=&gt;</span> x <span class="op">===</span> <span class="dv">3</span>) <span class="co">// 2</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">findIndex</span>(x <span class="kw">=&gt;</span> x <span class="op">&lt;</span> <span class="dv">0</span>) <span class="co">// -1; no negative numbers in the array.</span></span></code></pre></div>
<hr />
<p><code>every</code> and <code>some</code> (like python
<code>any</code> and <code>all</code>)</p>
<div class="sourceCode" id="cb62"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">5</span>]<span class="op">;</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">every</span>(x <span class="kw">=&gt;</span> x <span class="op">&lt;</span> <span class="dv">10</span>) <span class="co">// true</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">some</span>(x <span class="kw">=&gt;</span> x <span class="op">%</span> <span class="dv">2</span> <span class="op">===</span> <span class="dv">0</span>) <span class="co">// true</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">some</span>(isNaN) <span class="co">// false, no non-numeric values.</span></span></code></pre></div>
<hr />
<p><code>reduce</code> and <code>reduceRight</code> (similar to Python’s
<code>sum</code> but more generic)</p>
<div class="sourceCode" id="cb63"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">5</span>]<span class="op">;</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co">// the second argument (0) is optional.</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">reduce</span>((x<span class="op">,</span> y) <span class="kw">=&gt;</span> x<span class="op">+</span>y<span class="op">,</span> <span class="dv">0</span>) <span class="co">// 15 (the sum)</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">reduce</span>((x<span class="op">,</span> y) <span class="kw">=&gt;</span> (x <span class="op">&gt;</span> y) <span class="op">?</span> x <span class="op">:</span> y) <span class="co">// 5 (largest value)</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="co">// reduceRight is the same as</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="co">// reduce, but it starts from the</span></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="co">// highest index.</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> [<span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span>]<span class="op">;</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">reduceRight</span>((acc<span class="op">,</span>val) <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">pow</span>(val<span class="op">,</span>acc)) <span class="co">// 2^(3^4)</span></span></code></pre></div>
<hr />
<p><code>flat</code> and <code>flatMap</code></p>
<div class="sourceCode" id="cb64"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">// new in ES2019</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span><span class="op">,</span> [<span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]]<span class="op">.</span><span class="fu">flat</span>() <span class="co">// [1,2,3]</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span><span class="op">,</span> [<span class="dv">2</span><span class="op">,</span> [<span class="dv">3</span>]]]<span class="op">.</span><span class="fu">flat</span>() <span class="co">// [1,2,[34]]</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="co">// to flat more levels pass a</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="co">// number to flat</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span>[<span class="dv">2</span><span class="op">,</span>[<span class="dv">3</span><span class="op">,</span>[<span class="dv">4</span>]]]]<span class="op">;</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">flat</span>(<span class="dv">1</span>) <span class="co">// [1,2,[3,[4]]</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">flat</span>(<span class="dv">999</span>) <span class="co">// [1,2,3,4]</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a><span class="co">// flatMap is like flat but</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a><span class="co">// allows you to pass a function</span></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a><span class="co">// to map the values.</span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> phrases <span class="op">=</span> [<span class="st">&quot;hello world&quot;</span><span class="op">,</span> <span class="st">&quot;hi hi&quot;</span>]<span class="op">;</span></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> words <span class="op">=</span> phrases<span class="op">.</span><span class="fu">flatMap</span>(phrase <span class="kw">=&gt;</span> phrase<span class="op">.</span><span class="fu">split</span>(<span class="st">&quot; &quot;</span>))<span class="op">;</span></span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a>words <span class="co">// [&quot;hello&quot;, &quot;world&quot;, &quot;hi&quot;, &quot;hi&quot;]</span></span></code></pre></div>
<hr />
<p><code>concat</code> (like Python’s <code>extend</code>)</p>
<div class="sourceCode" id="cb65"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">concat</span>(<span class="dv">4</span><span class="op">,</span> <span class="dv">5</span>)<span class="op">;</span> <span class="co">// [1,2,3,4,5]</span></span></code></pre></div>
<hr />
<p><code>push</code> (like Python’s <code>append</code>) and
<code>pop</code></p>
<div class="sourceCode" id="cb66"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span>[<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span>]<span class="op">;</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">push</span>(<span class="dv">4</span><span class="op">,</span><span class="dv">5</span>)<span class="op">;</span> <span class="co">// a == [1,2,3,4,5]</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">pop</span>() <span class="co">// 5; also a == [1,2,3,4]</span></span></code></pre></div>
<hr />
<p><code>includes</code> (Like Python’s <code>in</code>)</p>
<div class="sourceCode" id="cb67"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">// new in ES2016.</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> a <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span><span class="kw">true</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="kw">NaN</span>]<span class="op">;</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">includes</span>(<span class="kw">true</span>) <span class="co">// true</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">includes</span>(<span class="dv">2</span>) <span class="co">// false</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">includes</span>(<span class="kw">NaN</span>) <span class="co">// true</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="co">// the === algorithm for indexOf</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a><span class="co">// does not consider NaN to be equal</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="co">// to itself.</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>a<span class="op">.</span><span class="fu">indexOf</span>(<span class="kw">NaN</span>) <span class="co">// -1 (indexOf can&#39;t find NaN)</span></span></code></pre></div>
<h2 id="chapter-8">Chapter 8</h2>
<h3 id="functions">Functions</h3>
<p>In JavaScript, functions are objects and can be manipulated by
programs. JavaScript can assign functions to variables and pass them to
other functions.</p>
<p>Javascript function definitions can be nested within other functions.
In this case, they have access to any variables that are in scope where
they are defined. This means that JavaScript functions are closures.</p>
<blockquote>
<p>Function declaration statements are “hoisted” to the top of the
enclosing script, function, or block so that functions defined in this
way may be invoked from code that appears before the definition.</p>
</blockquote>
<hr />
<p>Default function values.</p>
<blockquote>
<p>Parameter default expressions are evaluated when your function is
called, not when it is defined.</p>
</blockquote>
<div class="sourceCode" id="cb68"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">// In ES6 and later you can</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="co">// define default values for</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="co">// your function arguments</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">getPropertyNames</span>(o<span class="op">,</span> a <span class="op">=</span> []) {</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">let</span> property <span class="kw">in</span> o) a<span class="op">.</span><span class="fu">push</span>(property)<span class="op">;</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> a</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<p>Rest parameters (like Python’s <code>*args</code>,
<code>**kwargs</code>)</p>
<blockquote>
<p>Important: within the body of the function, the <code>rest</code>
argument will ALWAYS be an Array.</p>
</blockquote>
<div class="sourceCode" id="cb69"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">max</span>(first<span class="op">=-</span><span class="kw">Infinity</span><span class="op">,</span> <span class="op">...</span>rest) {</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> maxValue <span class="op">=</span> first<span class="op">;</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> <span class="kw">let</span> (n <span class="kw">of</span> rest) {</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (n <span class="op">&gt;</span> maxValue) {</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>      maxValue <span class="op">=</span> n<span class="op">;</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span>)<span class="op">;</span> <span class="co">// &gt; 100</span></span></code></pre></div>
<hr />
<p>Declaring and calling an anonymous function</p>
<div class="sourceCode" id="cb70"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">function</span>() {<span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;hi&#39;</span>)}())<span class="op">;</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="co">// or (note the parenthesis)</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>(<span class="kw">function</span>() {<span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;hi&#39;</span>)})()<span class="op">;</span></span></code></pre></div>
<hr />
<p><code>call</code> and <code>apply</code></p>
<blockquote>
<p>call() and apply() allow you to indirectly invoke a function as if it
were a method of some other object. The first argument to both functions
is the object on which the function is to be invoked. This argument is
the invocation context and becomes the value of the <code>this</code>
keyword within the body of the function</p>
</blockquote>
<blockquote>
<p>Remember that arrow functions inherit the <code>this</code> value of
the context where they are define. Thus, call() and apply() methods
don’t work with it as the first argument is effectively ignored.</p>
</blockquote>
<blockquote>
<p>The apply() method is like call(), except that the arguments to call
the function with are passed as an array</p>
</blockquote>
<div class="sourceCode" id="cb71"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>f<span class="op">.</span><span class="fu">call</span>(o)<span class="op">;</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>f<span class="op">.</span><span class="fu">apply</span>(o)<span class="op">;</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>o<span class="op">.</span><span class="at">m</span> <span class="op">=</span> f<span class="op">;</span> <span class="co">// make f a temporary method of o</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>o<span class="op">.</span><span class="fu">m</span>()<span class="op">;</span> <span class="co">// invoke it</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="kw">delete</span> o<span class="op">.</span><span class="at">m</span><span class="op">;</span> <span class="co">// remove the temporary method</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="co">// any arguments after the first, are passed</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a><span class="co">// into the function:</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>f<span class="op">.</span><span class="fu">call</span>(o<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">;</span> <span class="co">// f(1, 2)</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a><span class="co">// apply uses arrays.</span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>f<span class="op">.</span><span class="fu">apply</span>(o<span class="op">,</span> [<span class="dv">1</span><span class="op">,</span><span class="dv">2</span>])<span class="op">;</span></span></code></pre></div>
<hr />
<p><code>bind</code></p>
<blockquote>
<p>The primary purpose of bind() is to bind a function to an object.
When you invoke the bind() method on a function f and pass an object o,
the method returns a new function. Invoking the new function (as a
function) invokes the original function f as a method of o.</p>
</blockquote>
<blockquote>
<p>Arrow functions inherit their this value from the environment in
which they are defined, and that value cannot be overridden with bind(),
so if the function f() in the preceding code was defined as an arrow
function, the binding would not work.</p>
</blockquote>
<blockquote>
<p>The most common use case for calling bind() is to make non-arrow
functions behave like arrow functions, however, so this limitation on
binding arrow functions is not a problem in practice.</p>
</blockquote>
<div class="sourceCode" id="cb72"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co">// function that will bound</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">f</span>(y) {<span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">+</span> y}</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> o <span class="op">=</span> { <span class="dt">x</span><span class="op">:</span> <span class="dv">1</span>}<span class="op">;</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="co">// calling g will invoke f on o.</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> g <span class="op">=</span> f<span class="op">.</span><span class="fu">bind</span>(o)<span class="op">;</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="fu">g</span>(<span class="dv">2</span>) <span class="op">===</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> p <span class="op">=</span> {<span class="dt">x</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span> g}<span class="op">;</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>p<span class="op">.</span><span class="fu">g</span>(<span class="dv">2</span>) <span class="op">===</span> <span class="dv">3</span><span class="op">;</span> <span class="co">// g is still bound to o, not p.</span></span></code></pre></div>
<h2 id="chapter-9">Chapter 9</h2>
<h3 id="classes">Classes</h3>
<blockquote>
<p>In JavaScript, a class is a set of objects that inherit properties
from the same prototype object. The prototype object, therefore, is the
central feature of a class.</p>
</blockquote>
<blockquote>
<p>If we define a prototype object, and then use
<code>Object.create()</code> to create objects that inherit from it, we
have defined a JavaScript class.</p>
</blockquote>
<p>However, ES6 introduces the reserved word <code>class</code>, making
the creation of new instances more straightforward.</p>
<p>The example below demonstrates an idiomatic way to create classes in
versions of JavaScript that do not support the ES6 <code>class</code>
keyword. A lot of old cold still uses this class-creation pattern.</p>
<div class="sourceCode" id="cb73"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">Range</span>(<span class="im">from</span><span class="op">,</span> to) {</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">this</span><span class="op">.</span><span class="at">from</span> <span class="op">=</span> <span class="im">from</span><span class="op">;</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">this</span><span class="op">.</span><span class="at">to</span> <span class="op">=</span> to<span class="op">;</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="co">// note that the property name</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="co">// must be &quot;prototype&quot; for this</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a><span class="co">// to work.</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="bu">Range</span><span class="op">.</span><span class="at">prototype</span> <span class="op">=</span> {</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">constructor</span><span class="op">:</span> <span class="bu">Range</span><span class="op">,</span> <span class="co">// explicitly set the constructor.</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">includes</span><span class="op">:</span> <span class="kw">function</span>(x) { <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">from</span> <span class="op">&lt;=</span> x <span class="op">&amp;&amp;</span> <span class="kw">this</span><span class="op">.</span><span class="at">to</span> <span class="op">&gt;=</span> x }<span class="op">,</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">// a generator to make iterables</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>  [<span class="bu">Symbol</span><span class="op">.</span><span class="at">iterator</span>]<span class="op">:</span> <span class="kw">function</span><span class="op">*</span>() {</span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> x <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">ceil</span>(<span class="kw">this</span><span class="op">.</span><span class="at">from</span>)<span class="op">;</span> x <span class="op">&lt;=</span> <span class="kw">this</span><span class="op">.</span><span class="at">to</span><span class="op">;</span> x<span class="op">++</span>) <span class="kw">yield</span> x</span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>  <span class="dt">toString</span><span class="op">:</span> <span class="kw">function</span>() {<span class="cf">return</span> <span class="st">&quot;(&quot;</span><span class="op">+</span><span class="kw">this</span><span class="op">.</span><span class="at">from</span><span class="op">+</span><span class="st">&quot;...&quot;</span><span class="op">+</span><span class="kw">this</span><span class="op">.</span><span class="at">to</span><span class="op">+</span><span class="st">&quot;)&quot;</span><span class="op">;</span>}<span class="op">,</span></span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> r <span class="op">=</span> <span class="kw">new</span> <span class="bu">Range</span>(<span class="dv">1</span><span class="op">,</span><span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a>r<span class="op">.</span><span class="fu">includes</span>(<span class="dv">2</span>) <span class="co">// true</span></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a>r<span class="op">.</span><span class="fu">toString</span>() <span class="co">// (1,...,3)</span></span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a>[<span class="op">...</span>r] <span class="co">// [1,2,3]</span></span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true" tabindex="-1"></a><span class="kw">typeof</span> r <span class="co">// &quot;object&quot;</span></span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true" tabindex="-1"></a>r <span class="kw">instanceof</span> <span class="bu">Range</span> <span class="co">// true</span></span></code></pre></div>
<p>Note that the above doesn’t work well with subclasses. Prior to ES6,
JavaScript didn’t have a simple way to call the parent class methods as
the keyword <code>super</code> does.</p>
<blockquote>
<p>Any regular JS function can be used as a constructor. Constructor
invocations need a prototype property. Therefore, every regular JS
function automatically has a prototype property. The value of this
property is an object that has a single, non-enumerable, constructor
property. The value of the constructor property is the function
object:</p>
</blockquote>
<div class="sourceCode" id="cb74"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> F <span class="op">=</span> <span class="kw">function</span>() {}<span class="op">;</span> <span class="co">// &quot;F&quot; is the function object</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> p <span class="op">=</span> f<span class="op">.</span><span class="at">prototype</span><span class="op">;</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> c <span class="op">=</span> f<span class="op">.</span><span class="at">constructor</span><span class="op">;</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>c <span class="op">===</span> F <span class="co">// true &gt; F.prototype.constructor === F for any f</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> o <span class="op">=</span> <span class="kw">new</span> <span class="fu">F</span>()<span class="op">;</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>o<span class="op">.</span><span class="at">constructor</span> <span class="op">===</span> F <span class="co">// true</span></span></code></pre></div>
<p>Using ES6, the Range example above can be rewritten as:</p>
<div class="sourceCode" id="cb75"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="bu">Range</span> {</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">constructor</span>(<span class="im">from</span><span class="op">,</span> to) {</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">from</span> <span class="op">=</span> <span class="im">from</span><span class="op">;</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">to</span> <span class="op">=</span> to<span class="op">;</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">includes</span>(x) {</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="at">from</span> <span class="op">&lt;=</span> x <span class="op">&amp;&amp;</span> <span class="kw">this</span><span class="op">.</span><span class="at">to</span> <span class="op">&gt;=</span> x</span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">*</span>[<span class="bu">Symbol</span><span class="op">.</span><span class="at">iterator</span>]() {</span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> x <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">ceil</span>(<span class="kw">this</span><span class="op">.</span><span class="at">from</span>)<span class="op">;</span> x <span class="op">&lt;=</span> <span class="kw">this</span><span class="op">.</span><span class="at">to</span><span class="op">;</span> x<span class="op">++</span>) <span class="kw">yield</span> x</span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">toString</span>() {</span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`(</span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">from</span><span class="sc">}</span><span class="vs">,...,</span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">to</span><span class="sc">}</span><span class="vs">)`</span><span class="op">;</span></span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb75-19"><a href="#cb75-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-20"><a href="#cb75-20" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> r <span class="op">=</span> <span class="kw">new</span> <span class="bu">Range</span>(<span class="dv">1</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb75-21"><a href="#cb75-21" aria-hidden="true" tabindex="-1"></a>r<span class="op">.</span><span class="fu">includes</span>(<span class="dv">2</span>) <span class="op">===</span> <span class="kw">true</span></span>
<span id="cb75-22"><a href="#cb75-22" aria-hidden="true" tabindex="-1"></a>r<span class="op">.</span><span class="fu">toString</span>() <span class="op">===</span> <span class="st">&#39;(1,...,3)&#39;</span><span class="op">;</span></span>
<span id="cb75-23"><a href="#cb75-23" aria-hidden="true" tabindex="-1"></a>[<span class="op">...</span>r] <span class="co">// -&gt; [1,2,3];</span></span>
<span id="cb75-24"><a href="#cb75-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-25"><a href="#cb75-25" aria-hidden="true" tabindex="-1"></a><span class="bu">Range</span><span class="op">.</span><span class="at">prototype</span><span class="op">.</span><span class="at">constructor</span> <span class="op">===</span> <span class="bu">Range</span></span></code></pre></div>
<p>Note that the use of <code>class</code> is just syntax sugar, as it
does exactly the same thing as the previous example using pre-ES6
JavaScript.</p>
<p>Also, unlike function declarations, class declarations are not
“hoisted” to the top of the enclosed file or enclosed function. Thus,
you cannot instantiate a class before you declare it.</p>
<hr />
<p><code>extend</code> can be used to define subclasses.</p>
<div class="sourceCode" id="cb76"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Span <span class="kw">extends</span> <span class="bu">Range</span> {</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">constructor</span>(start<span class="op">,</span> length) {</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (length <span class="op">&gt;=</span> <span class="dv">0</span>) {</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>      <span class="co">// super calls Range.constructor</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">super</span>(start<span class="op">,</span> start <span class="op">+</span> length)<span class="op">;</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>      <span class="kw">super</span>(start <span class="op">+</span> length<span class="op">,</span> start)<span class="op">;</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> EZArray <span class="kw">extends</span> <span class="bu">Array</span> {</span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>  get <span class="fu">first</span>() { <span class="cf">return</span> <span class="kw">this</span>[<span class="dv">0</span>]<span class="op">;</span> }<span class="op">,</span></span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>  get <span class="fu">last</span>() { <span class="cf">return</span> <span class="kw">this</span>[<span class="kw">this</span><span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>]<span class="op">;</span> }<span class="op">,</span></span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<p><code>static</code> methods. You can define a static method within a
class body by prefixing it with the static keyword. Static methods are
defined as properties of the constructor function rather than properties
of the prototype object.</p>
<p>Because static methods are invoked on the constructor rather than on
any particular instance, it almost never makes sense to use the this
keyword in a static method.</p>
<div class="sourceCode" id="cb77"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="kw">static</span> <span class="fu">parse</span>(s) {</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> matches <span class="op">=</span> s<span class="op">.</span><span class="fu">match</span>(<span class="ss">/</span><span class="sc">^\((\d+)\.\.\.(\d+)\)$</span><span class="ss">/</span>)<span class="op">;</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>matches) {</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">TypeError</span>(<span class="vs">`Cannot parse Range from &quot;</span><span class="sc">${</span>s<span class="sc">}</span><span class="vs">&quot;.`</span>)<span class="op">;</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Range</span>(<span class="pp">parseInt</span>(matches[<span class="dv">1</span>])<span class="op">,</span> <span class="pp">parseInt</span>(matches[<span class="dv">2</span>]))<span class="op">;</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> r <span class="op">=</span> <span class="bu">Range</span><span class="op">.</span><span class="fu">parse</span>(<span class="st">&#39;(1...10)&#39;</span>)<span class="op">;</span></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a><span class="co">// won&#39;t work for the instance.</span></span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>r<span class="op">.</span><span class="fu">parse</span>(<span class="st">&#39;(1...10)&#39;</span>)<span class="op">;</span> <span class="co">// TypeError: r.parse is not a function</span></span></code></pre></div>
<hr />
<p><code>static fields</code></p>
<div class="sourceCode" id="cb78"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co">// instead of</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="bu">Buffer</span> {</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">constructor</span>() {</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">size</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">capacity</span> <span class="op">=</span> <span class="dv">4096</span><span class="op">;</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">buffer</span> <span class="op">=</span> <span class="kw">new</span> <span class="bu">Uint8Array</span>(<span class="kw">this</span><span class="op">.</span><span class="at">capacity</span>)<span class="op">;</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a><span class="co">// do:</span></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="bu">Buffer</span> {</span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a>  size <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a>  capacity <span class="op">=</span> <span class="dv">4096</span><span class="op">;</span></span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a>  buffer <span class="op">=</span> <span class="kw">new</span> <span class="bu">Uint8Array</span>(<span class="kw">this</span><span class="op">.</span><span class="at">capacity</span>)<span class="op">;</span></span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<p><code>private fields</code> (start with #)</p>
<div class="sourceCode" id="cb79"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="bu">Buffer</span> {</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  #size <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  get <span class="fu">size</span>() { <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span>#size }<span class="op">;</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h2 id="chapter-10">Chapter 10</h2>
<h3 id="modules">Modules</h3>
<blockquote>
<p>As a practical matter, modularity is mostly about encapsulating or
hiding private implementation details and keeping the global namespace
tidy so that modules cannot accidentally modify the variables,
functions, and classes defined by other modules.</p>
</blockquote>
<blockquote>
<p>Although <code>import</code> and <code>export</code> have been part
of the language for years, they were only implemented by web browsers
and Node relatively recently.</p>
</blockquote>
<hr />
<p>Node <code>exports</code>. (Note, you might want to use the ES6
modules feature available in Node 13 instead!)</p>
<blockquote>
<p>Node defines a global <code>exports</code> object that is always
defined. If you’re writing a Node module that exports multiple values,
you can simply assign them to the properties of this object</p>
</blockquote>
<div class="sourceCode" id="cb80"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> sum <span class="op">=</span> (x<span class="op">,</span> y) <span class="kw">=&gt;</span> x <span class="op">+</span> y<span class="op">;</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>exports<span class="op">.</span><span class="at">mean</span> <span class="op">=</span> data <span class="kw">=&gt;</span> data<span class="op">.</span><span class="fu">reduce</span>(sum)<span class="op">/</span>data<span class="op">.</span><span class="at">length</span><span class="op">;</span></span></code></pre></div>
<p><code>module.exports</code> is similar to <code>exports</code>, but
it’s useful when you want to export only a single function or class
rather than an object full of functions or classes.</p>
<div class="sourceCode" id="cb81"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>module<span class="op">.</span><span class="at">exports</span> <span class="op">=</span> <span class="kw">class</span> BitSet <span class="kw">extends</span> AbstractWritableSet {</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Node <code>require</code> (Note, you might want to use the ES6
modules feature available in Node 13 instead!)</p>
<div class="sourceCode" id="cb82"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> stats <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;./stats.js&#39;</span>)<span class="op">;</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="co">// or a lib installed separately or</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="co">// a build in lib can be</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="co">// imported as</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> fs <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;fs&quot;</span>)</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="co">// use destructuring assignment to</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a><span class="co">// import only the functions you want</span></span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> { stddev } <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;./stats.js&#39;</span>)<span class="op">;</span></span></code></pre></div>
<hr />
<p>ES6 Modules</p>
<p><code>export</code></p>
<div class="sourceCode" id="cb83"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> <span class="cn">PI</span> <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span><span class="op">;</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">function</span> <span class="fu">degreesToRadians</span>(d) { <span class="cf">return</span> d <span class="op">*</span> <span class="cn">PI</span> <span class="op">/</span> <span class="dv">180</span> }<span class="op">;</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="co">// or do this at the end of</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="co">// the file instead:</span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> <span class="cn">PI</span> <span class="op">=</span> <span class="op">...</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">degreesToRadians</span>(d) { <span class="op">...</span> }<span class="op">;</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a><span class="co">// note that the curly braces don&#39;t</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="co">// actually define an object in this case!</span></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a><span class="co">// However, `export default` would return an</span></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a><span class="co">// object!</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> { degreesToRadians<span class="op">,</span> <span class="cn">PI</span> }<span class="op">;</span> <span class="co">// end of file</span></span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a><span class="co">// it is common to write modules</span></span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a><span class="co">// that only export a single value.</span></span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a><span class="co">// in this case, use export default instead</span></span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="im">default</span> <span class="kw">class</span> BitSet {</span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb83-19"><a href="#cb83-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb83-20"><a href="#cb83-20" aria-hidden="true" tabindex="-1"></a><span class="co">// you can also rename exports</span></span>
<span id="cb83-21"><a href="#cb83-21" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> { layout <span class="im">as</span> calculateLayour<span class="op">,</span> render <span class="im">as</span> renderLayout }<span class="op">;</span></span></code></pre></div>
<p><code>import</code></p>
<div class="sourceCode" id="cb84"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co">// importing a default module</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="co">// note, you can pick whatever name</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="co">// for BitSet as you like!</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> BitSet <span class="im">from</span> <span class="st">&#39;./bistset.js&#39;</span><span class="op">;</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a><span class="co">// or a module with multiple exports</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { mean<span class="op">,</span> stddev } <span class="im">from</span> <span class="st">&quot;./stats.js&quot;</span><span class="op">;</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a><span class="co">// importing everything</span></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="op">*</span> <span class="im">as</span> stats <span class="im">from</span> <span class="st">&quot;./stats.js&quot;</span></span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a><span class="co">// rename it</span></span>
<span id="cb84-13"><a href="#cb84-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { render <span class="im">as</span> renderImage } <span class="im">from</span> <span class="st">&quot;./imageutils.js&quot;</span></span>
<span id="cb84-14"><a href="#cb84-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-15"><a href="#cb84-15" aria-hidden="true" tabindex="-1"></a><span class="co">// module with both export and export default</span></span>
<span id="cb84-16"><a href="#cb84-16" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> Histogram<span class="op">,</span> { mean<span class="op">,</span> stddev } <span class="im">from</span> <span class="st">&quot;./histogram-stats.js&quot;</span><span class="op">;</span></span>
<span id="cb84-17"><a href="#cb84-17" aria-hidden="true" tabindex="-1"></a><span class="co">// adding renaming on top</span></span>
<span id="cb84-18"><a href="#cb84-18" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { <span class="im">default</span> <span class="im">as</span> Histogram<span class="op">,</span> mean<span class="op">,</span> stddev } <span class="im">from</span> <span class="st">&quot;./histogram-stats.js&quot;</span><span class="op">;</span></span>
<span id="cb84-19"><a href="#cb84-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-20"><a href="#cb84-20" aria-hidden="true" tabindex="-1"></a><span class="co">// modules without exports</span></span>
<span id="cb84-21"><a href="#cb84-21" aria-hidden="true" tabindex="-1"></a><span class="co">// those modules run once the first</span></span>
<span id="cb84-22"><a href="#cb84-22" aria-hidden="true" tabindex="-1"></a><span class="co">// time they&#39;re imported.</span></span>
<span id="cb84-23"><a href="#cb84-23" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="st">&quot;./analytics.js&quot;</span></span>
<span id="cb84-24"><a href="#cb84-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-25"><a href="#cb84-25" aria-hidden="true" tabindex="-1"></a><span class="co">// dynamically importing a module</span></span>
<span id="cb84-26"><a href="#cb84-26" aria-hidden="true" tabindex="-1"></a><span class="im">import</span>(<span class="st">&quot;./stats.js&quot;</span>)<span class="op">.</span><span class="fu">then</span>(stats <span class="kw">=&gt;</span> {</span>
<span id="cb84-27"><a href="#cb84-27" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> average <span class="op">=</span> stats<span class="op">.</span><span class="fu">mean</span>(data)<span class="op">;</span></span>
<span id="cb84-28"><a href="#cb84-28" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb84-29"><a href="#cb84-29" aria-hidden="true" tabindex="-1"></a><span class="co">// or</span></span>
<span id="cb84-30"><a href="#cb84-30" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="fu">analyseData</span>(data) {</span>
<span id="cb84-31"><a href="#cb84-31" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> stats <span class="op">=</span> <span class="cf">await</span> <span class="im">import</span>(<span class="st">&quot;./stats.js&quot;</span>)<span class="op">;</span></span>
<span id="cb84-32"><a href="#cb84-32" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {<span class="dt">average</span><span class="op">:</span> stats<span class="op">.</span><span class="fu">mean</span>(data)<span class="op">,</span> <span class="dt">stddev</span><span class="op">:</span> stats<span class="op">.</span><span class="fu">stddev</span>(data)}<span class="op">;</span></span>
<span id="cb84-33"><a href="#cb84-33" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><code>re-exports</code></p>
<p>If you had two files <code>stats/mean.js</code> and
<code>stats/stddev.js</code> and you want to expose both their
functionality through <code>stats/main.js</code> you can:</p>
<div class="sourceCode" id="cb85"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co">// stats/main.js</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> { mean } <span class="im">from</span> <span class="st">&quot;./stats/mean.js&quot;</span><span class="op">;</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> { stddev } <span class="im">from</span> <span class="st">&quot;./stats/stddev.js&quot;</span><span class="op">;</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="co">// or</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="op">*</span> <span class="im">from</span> <span class="st">&quot;./stats/mean.js&quot;</span><span class="op">;</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="op">*</span> <span class="im">from</span> <span class="st">&quot;./stats/stddev.js&quot;</span><span class="op">;</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a><span class="co">// or make it the default export of your module</span></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> { mean <span class="im">as</span> <span class="im">default</span> } <span class="im">from</span> <span class="st">&quot;./stats/mean.js&quot;</span><span class="op">;</span></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a><span class="co">// or (though not very useful)</span></span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> { <span class="im">default</span> } <span class="im">from</span> <span class="st">&quot;./stats/mean.js&quot;</span><span class="op">;</span></span></code></pre></div>
<h2 id="chapter-11">Chapter 11</h2>
<h3 id="standard-library">Standard Library</h3>
<p>I decided to not do a review of this chapter as the content is better
understood from the book. Moreover, most of it is fairly googleable.</p>
<h2 id="chapter-12">Chapter 12</h2>
<h3 id="iterators-and-generators">Iterators and Generators</h3>
<p>To learn more about iterators refer to the book. I’m going to go
through generators instead as they encapsulate most of what iterators
do.</p>
<hr />
<p>A generator is particularly useful when the values to be iterated are
not the elements of a data structure, but the result of a computation. A
generator function is syntactically like a regular JS function, except
it’s defined with the keyword
<strong><code>function*</code></strong>.</p>
<p>When you invoke a generator function, it doesn’t actually execute the
function body, but instead returns a generator object. This generator
object is an iterator. Calling its next() method causes the body of the
generator function to run from the start (or whatever its current
position is) until it reaches a yield statement.</p>
<p>A quick example:</p>
<div class="sourceCode" id="cb86"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span><span class="op">*</span> <span class="fu">oneDigitPrimes</span>() {</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>primes <span class="op">=</span> [<span class="op">...</span><span class="fu">oneDigitPrimes</span>()]<span class="op">;</span> <span class="co">// [ 2, 3, 5, 7 ]</span></span></code></pre></div>
<p>In an object:</p>
<div class="sourceCode" id="cb87"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>o <span class="op">=</span> {</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span><span class="dv">1</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span><span class="dv">2</span><span class="op">,</span> <span class="dt">z</span><span class="op">:</span><span class="dv">3</span><span class="op">,</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">*</span><span class="fu">g</span>() {</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> key <span class="kw">of</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">keys</span>(<span class="kw">this</span>)) {</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">yield</span> key</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>[<span class="op">...</span>o<span class="op">.</span><span class="fu">g</span>()] <span class="co">// &gt; x, y, z, g</span></span></code></pre></div>
<p>In a class:</p>
<div class="sourceCode" id="cb88"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Blah {</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">//...</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// note that the brackets around</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// [Symbol.iterator] are necessary</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// since it is a computed property.</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">*</span>[<span class="bu">Symbol</span><span class="op">.</span><span class="at">iterator</span>]() {</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> <span class="st">&quot;something&quot;</span><span class="op">;</span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Nested yields with <code>yield*</code></p>
<div class="sourceCode" id="cb89"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span><span class="op">*</span> <span class="fu">sequenece</span>(<span class="op">...</span>iterables) {</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">let</span> iterable <span class="kw">of</span> iterables) {</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// exhaust each iterable in</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// a sequence of iterables</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// before going to the next</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span><span class="op">*</span> iterable<span class="op">;</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>[<span class="op">...</span><span class="fu">sequence</span>(<span class="st">&quot;abc&quot;</span><span class="op">,</span> <span class="st">&quot;def&quot;</span>)] <span class="co">// &gt; &#39;[a,b,c,d,e,f]&#39;</span></span></code></pre></div>
<h2 id="chapter-13">Chapter 13</h2>
<h3 id="asynchronous-javascript">Asynchronous JavaScript</h3>
<p><code>Promise</code>.</p>
<p>The Promise API is intentionally vague. There is no way to
synchronously get the value of a Promise; you can only ask the Promise
to call a callback function when the value is ready. So, at the simplest
level, Promises are just a different way of working with callbacks.</p>
<div class="sourceCode" id="cb90"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co">// promise chain</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">getJSON</span>(<span class="st">&quot;/api/user/profile&quot;</span>)<span class="op">.</span><span class="fu">then</span>(displayUserProfile)<span class="op">.</span><span class="fu">catch</span>(handleProfileError)<span class="op">;</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="co">// another promise chain</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="fu">fetch</span>(documentURL)</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">then</span>(response <span class="kw">=&gt;</span> response<span class="op">.</span><span class="fu">json</span>())</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">then</span>(<span class="bu">document</span> <span class="kw">=&gt;</span> <span class="fu">render</span>(<span class="bu">document</span>))</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// if any callbacks invoked by then() return an error,</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">// this error is passed to catch(), no matter where in</span></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">// the chain we are at.</span></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">// In synchronous code we say that if something goes</span></span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">// wrong, a exception will &quot;bubble up the call stack&quot;.</span></span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">// In async, we say that an error will</span></span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">// &quot;trickle down the chain&quot; until it finds a catch()</span></span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">// method.</span></span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">catch</span>(handleError)</span>
<span id="cb90-17"><a href="#cb90-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">// .finally() is useful for cleaning up.</span></span>
<span id="cb90-18"><a href="#cb90-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">// You won&#39;t know whether the Promise is fulfilled</span></span>
<span id="cb90-19"><a href="#cb90-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">// or rejected. No arguments are passed to its</span></span>
<span id="cb90-20"><a href="#cb90-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">// callback</span></span>
<span id="cb90-21"><a href="#cb90-21" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">finally</span>(() <span class="kw">=&gt;</span> <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;chain ended!&#39;</span>)<span class="op">;</span></span>
<span id="cb90-22"><a href="#cb90-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-23"><a href="#cb90-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-24"><a href="#cb90-24" aria-hidden="true" tabindex="-1"></a><span class="co">// Sometimes errors occur at random,</span></span>
<span id="cb90-25"><a href="#cb90-25" aria-hidden="true" tabindex="-1"></a><span class="co">// in these cases you can retry the</span></span>
<span id="cb90-26"><a href="#cb90-26" aria-hidden="true" tabindex="-1"></a><span class="co">// async operation like this:</span></span>
<span id="cb90-27"><a href="#cb90-27" aria-hidden="true" tabindex="-1"></a><span class="fu">queryDatabase</span>()</span>
<span id="cb90-28"><a href="#cb90-28" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">catch</span>(e <span class="kw">=&gt;</span> <span class="fu">wait</span>(<span class="dv">500</span>)<span class="op">.</span><span class="fu">then</span>(queryDatabase))</span>
<span id="cb90-29"><a href="#cb90-29" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">then</span>(displayTable)</span>
<span id="cb90-30"><a href="#cb90-30" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">catch</span>(displayDatabaseError)<span class="op">;</span></span>
<span id="cb90-31"><a href="#cb90-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-32"><a href="#cb90-32" aria-hidden="true" tabindex="-1"></a><span class="co">// Promises in Parallel</span></span>
<span id="cb90-33"><a href="#cb90-33" aria-hidden="true" tabindex="-1"></a><span class="co">// note that the returned</span></span>
<span id="cb90-34"><a href="#cb90-34" aria-hidden="true" tabindex="-1"></a><span class="co">// Promise will be rejected if</span></span>
<span id="cb90-35"><a href="#cb90-35" aria-hidden="true" tabindex="-1"></a><span class="co">// any of the input Promises are</span></span>
<span id="cb90-36"><a href="#cb90-36" aria-hidden="true" tabindex="-1"></a><span class="co">// rejected. Otherwise, it will be</span></span>
<span id="cb90-37"><a href="#cb90-37" aria-hidden="true" tabindex="-1"></a><span class="co">// fulfilled with the array of the</span></span>
<span id="cb90-38"><a href="#cb90-38" aria-hidden="true" tabindex="-1"></a><span class="co">// fulfilment of each</span></span>
<span id="cb90-39"><a href="#cb90-39" aria-hidden="true" tabindex="-1"></a><span class="co">// input Promise</span></span>
<span id="cb90-40"><a href="#cb90-40" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> urls <span class="op">=</span> [<span class="st">&#39;http://google.com&#39;</span><span class="op">,</span> <span class="st">&#39;http://marcelofern.com&#39;</span>]<span class="op">;</span></span>
<span id="cb90-41"><a href="#cb90-41" aria-hidden="true" tabindex="-1"></a>promises <span class="op">=</span> urls<span class="op">.</span><span class="fu">map</span>(url <span class="kw">=&gt;</span> <span class="fu">fetch</span>(url)<span class="op">.</span><span class="fu">then</span>(r <span class="kw">=&gt;</span> r<span class="op">.</span><span class="fu">text</span>()))<span class="op">;</span></span>
<span id="cb90-42"><a href="#cb90-42" aria-hidden="true" tabindex="-1"></a><span class="bu">Promise</span><span class="op">.</span><span class="fu">all</span>(promises)</span>
<span id="cb90-43"><a href="#cb90-43" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">then</span>(bodies <span class="kw">=&gt;</span> { <span class="co">/* do something with array of strings */</span> })</span>
<span id="cb90-44"><a href="#cb90-44" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">catch</span>(e <span class="kw">=&gt;</span> <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(e))<span class="op">;</span></span>
<span id="cb90-45"><a href="#cb90-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-46"><a href="#cb90-46" aria-hidden="true" tabindex="-1"></a><span class="co">// Promise.allSettled() is similar to Promise.all()</span></span>
<span id="cb90-47"><a href="#cb90-47" aria-hidden="true" tabindex="-1"></a><span class="co">// but it never rejects the returned Promise.</span></span>
<span id="cb90-48"><a href="#cb90-48" aria-hidden="true" tabindex="-1"></a><span class="co">// It does not fulfill that Promise until all</span></span>
<span id="cb90-49"><a href="#cb90-49" aria-hidden="true" tabindex="-1"></a><span class="co">// the input Promises have settled.</span></span>
<span id="cb90-50"><a href="#cb90-50" aria-hidden="true" tabindex="-1"></a><span class="co">// This method return a Promise that resolves</span></span>
<span id="cb90-51"><a href="#cb90-51" aria-hidden="true" tabindex="-1"></a><span class="co">// to an array of object, each having a status</span></span>
<span id="cb90-52"><a href="#cb90-52" aria-hidden="true" tabindex="-1"></a><span class="co">// property of &quot;fulfilled&quot; or &quot;rejected&quot;.</span></span>
<span id="cb90-53"><a href="#cb90-53" aria-hidden="true" tabindex="-1"></a><span class="bu">Promise</span><span class="op">.</span><span class="fu">allSettled</span>([<span class="bu">Promise</span><span class="op">.</span><span class="fu">resolve</span>(<span class="dv">1</span>)<span class="op">,</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">reject</span>(<span class="dv">2</span>)<span class="op">,</span> <span class="dv">3</span>])<span class="op">.</span><span class="fu">then</span>(</span>
<span id="cb90-54"><a href="#cb90-54" aria-hidden="true" tabindex="-1"></a>  results <span class="kw">=&gt;</span> {</span>
<span id="cb90-55"><a href="#cb90-55" aria-hidden="true" tabindex="-1"></a>    results[<span class="dv">0</span>] <span class="co">// status: &#39;fulfilled&#39;, value: 1</span></span>
<span id="cb90-56"><a href="#cb90-56" aria-hidden="true" tabindex="-1"></a>    results[<span class="dv">1</span>] <span class="co">// status: &#39;rejected&#39;, reason: 2</span></span>
<span id="cb90-57"><a href="#cb90-57" aria-hidden="true" tabindex="-1"></a>    results[<span class="dv">2</span>] <span class="co">// status: &#39;fulfilled&#39;, value: 3</span></span>
<span id="cb90-58"><a href="#cb90-58" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb90-59"><a href="#cb90-59" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb90-60"><a href="#cb90-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-61"><a href="#cb90-61" aria-hidden="true" tabindex="-1"></a><span class="co">// there&#39;s also Promise.race() when you only</span></span>
<span id="cb90-62"><a href="#cb90-62" aria-hidden="true" tabindex="-1"></a><span class="co">// care about the first Promise to fulfil.</span></span></code></pre></div>
<hr />
<p><code>async</code> and <code>await</code></p>
<p>Given a Promise object <strong>p</strong>, the expression “await p”
waits until p settles. If p fulfils, then the value of “await p” is the
fulfilment value of p.</p>
<div class="sourceCode" id="cb91"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co">// you can think of the async keyword,</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="co">// as a wrapper around a synchronous function:</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Thus:</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">f</span>(x) { <span class="co">/* body */</span> }<span class="op">;</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="co">// is equivalent of:</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">f</span>(x) {</span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Promise</span>(<span class="kw">function</span>(resolve<span class="op">,</span> reject) {</span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">resolve</span>((<span class="kw">function</span>(x) { <span class="co">/* body */</span> })(x))<span class="op">;</span></span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">catch</span>(e) {</span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">reject</span>(e)<span class="op">;</span></span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a><span class="co">// the await keyword does not cause</span></span>
<span id="cb91-18"><a href="#cb91-18" aria-hidden="true" tabindex="-1"></a><span class="co">// your program to block. The code</span></span>
<span id="cb91-19"><a href="#cb91-19" aria-hidden="true" tabindex="-1"></a><span class="co">// remains asynchronous, and the</span></span>
<span id="cb91-20"><a href="#cb91-20" aria-hidden="true" tabindex="-1"></a><span class="co">// await simply disguises this fact.</span></span>
<span id="cb91-21"><a href="#cb91-21" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="st">&quot;/api/user/profile&quot;</span>)<span class="op">;</span></span>
<span id="cb91-22"><a href="#cb91-22" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> profile <span class="op">=</span> <span class="cf">await</span> response<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb91-23"><a href="#cb91-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-24"><a href="#cb91-24" aria-hidden="true" tabindex="-1"></a><span class="co">// you can only use await within functions</span></span>
<span id="cb91-25"><a href="#cb91-25" aria-hidden="true" tabindex="-1"></a><span class="co">// declared with async.</span></span>
<span id="cb91-26"><a href="#cb91-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-27"><a href="#cb91-27" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">getHighScore</span>() {</span>
<span id="cb91-28"><a href="#cb91-28" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="st">&quot;/api/user/profile&quot;</span>)<span class="op">;</span></span>
<span id="cb91-29"><a href="#cb91-29" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> profile <span class="op">=</span> <span class="cf">await</span> response<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb91-30"><a href="#cb91-30" aria-hidden="true" tabindex="-1"></a>  <span class="co">// this return value will be a Promise</span></span>
<span id="cb91-31"><a href="#cb91-31" aria-hidden="true" tabindex="-1"></a>  <span class="co">// even if no Promise-related code appears</span></span>
<span id="cb91-32"><a href="#cb91-32" aria-hidden="true" tabindex="-1"></a>  <span class="co">// in the function&#39;s body.</span></span>
<span id="cb91-33"><a href="#cb91-33" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> profile<span class="op">.</span><span class="at">highScore</span><span class="op">;</span></span>
<span id="cb91-34"><a href="#cb91-34" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb91-35"><a href="#cb91-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-36"><a href="#cb91-36" aria-hidden="true" tabindex="-1"></a><span class="co">// await a set of concurrently</span></span>
<span id="cb91-37"><a href="#cb91-37" aria-hidden="true" tabindex="-1"></a><span class="co">// executing async functions</span></span>
<span id="cb91-38"><a href="#cb91-38" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> [value1<span class="op">,</span> value2] <span class="op">=</span> <span class="cf">await</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">all</span>([<span class="fu">getJson</span>(url1)<span class="op">,</span> <span class="fu">getJson</span>(url2)])<span class="op">;</span></span>
<span id="cb91-39"><a href="#cb91-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-40"><a href="#cb91-40" aria-hidden="true" tabindex="-1"></a><span class="co">// async generators</span></span>
<span id="cb91-41"><a href="#cb91-41" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span><span class="op">*</span> <span class="fu">clock</span>(interval<span class="op">,</span> max<span class="op">=</span><span class="kw">Infinity</span>) {</span>
<span id="cb91-42"><a href="#cb91-42" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">let</span> count <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> count <span class="op">&lt;=</span> max<span class="op">;</span> count<span class="op">++</span>) {</span>
<span id="cb91-43"><a href="#cb91-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">elapsedTime</span>(interval)<span class="op">;</span></span>
<span id="cb91-44"><a href="#cb91-44" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> count<span class="op">;</span></span>
<span id="cb91-45"><a href="#cb91-45" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb91-46"><a href="#cb91-46" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb91-47"><a href="#cb91-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-48"><a href="#cb91-48" aria-hidden="true" tabindex="-1"></a><span class="co">// async for/await</span></span>
<span id="cb91-49"><a href="#cb91-49" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">testClock</span>() {</span>
<span id="cb91-50"><a href="#cb91-50" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> <span class="cf">await</span> (<span class="kw">let</span> tick <span class="kw">of</span> <span class="fu">clock</span>(<span class="dv">300</span><span class="op">,</span> <span class="dv">100</span>)) {</span>
<span id="cb91-51"><a href="#cb91-51" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(tick)<span class="op">;</span></span>
<span id="cb91-52"><a href="#cb91-52" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb91-53"><a href="#cb91-53" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</body>
</html>
